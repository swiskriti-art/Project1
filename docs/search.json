[
  {
    "objectID": "summaryfx.html",
    "href": "summaryfx.html",
    "title": "summaryfx",
    "section": "",
    "text": "#Summary Functions\nbuilding summary functions from API data"
  },
  {
    "objectID": "API.html",
    "href": "API.html",
    "title": "API",
    "section": "",
    "text": "loading library\n\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter()  masks stats::filter()\n✖ purrr::flatten() masks jsonlite::flatten()\n✖ dplyr::lag()     masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(lubridate)\nlibrary(stringr)\n\nHelper function to parse the return data from Get of a URL. This function extracts the return data’s content. The json content is then parsed into a matrix\n\n# Function to get the data from a url\n# url should contain all the parameters \nget_url_data &lt;- function(url){\n  data &lt;- httr::GET(url)\n  parsed &lt;- fromJSON(rawToChar(data$content))\n  # parsed data(matrix) has column names in the fist row extract that row use it as column name of the parsed data\n  dimnames(parsed)[[2]] &lt;- parsed[1,]\n  #except first row taking the rest of rows of parsed data (matrix) and turn into a tibble\n  data_tbl &lt;- as_tibble(parsed[2:nrow(parsed),])\n}\n\nCreate factors for categorical variables\n\nsex_factor &lt;- list(levels = c(\"1\", \"2\"),\n                   labels = c(\"Male\", \"Female\"))\nfer_factor &lt;- list(levels = c(\"0\",\"1\", \"2\"), \n                   labels = c(\"N/A\", \"Yes\", \"No\"))\nhhl_factor &lt;- list(levels = c(\"0\", \"1\", \"2\", \"3\", \"4\", \"5\"), \n                   labels = c(\"N/A (GQ/vacant)\",\n                              \"English Only\",\n                              \"Spanish\",\n                              \"Other Indo-European languages\",\n                              \"Asian and Pacific Island languages\",\"Other Language\"))\nhispeed_factor &lt;- list(levels = c(\"0\",\"1\", \"2\"), \n                       labels = c(\"N/A (GQ/vacant/no paid access to the internet)\",\n                                  \"Yes\",\"No\"))\njwtrns_factor &lt;- list(levels = c(\"0\",\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\", \"09\", \"10\", \"11\"),\n                       labels = c(\"N/A\", \"Car, truck, or van\", \"Bus\", \n                                  \"Subway or elevated rail\",\n                                  \"Long-distance train or commuter rail\",\n                                  \"Light rail, streetcar, or trolley\",\n                                  \"Ferryboat\", \"Taxicab\",\n                                  \"Motorcycle\", \"Bicycle\", \"Walked\", \"Worked from home\",\n                                  \"Other method\"))\nsch_factor &lt;- list(levels = c(\"0\", \"1\", \"2\", \"3\"),\n                   labels = c(\"N/A (less than 3 years old)\",\n                              \"No, has not attended in the last 3 months\",\n                              \"Yes, public school or public college\",\n                              \"Yes, private school or college or home school\"))\nschl_factor &lt;- list(levels = c(\"16\",\n                              \"01\",\n                              \"04\",\n                              \"03\",\n                              \"07\",\n                              \"23\",\n                              \"19\",\n                              \"22\",\n                              \"10\",\n                              \"20\",\n                              \"0\", \n                              \"02\",\n                              \"21\",\n                              \"08\",\n                              \"24\",\n                              \"06\",\n                              \"14\",\n                              \"17\",\n                              \"12\",\n                              \"15\",\n                              \"13\",\n                              \"05\",\n                              \"11\",\n                              \"18\",\n                              \"09\"),\n                    labels = c(\"Regular high school diploma\",\n                              \"No schooling completed\",\n                              \"Grade 1\",\n                              \"Kindergarten\",\n                              \"Grade 4\",\n                              \"Professional degree beyond a bachelor's degree\",\n                              \"1 or more years of college credit, no degree\",\n                              \"Master's degree\",\n                              \"Grade 7\",\n                              \"Associate's degree\",\n                              \"N/A (less than 3 years old)\",\n                              \"Nursery school, preschool\",\n                              \"Bachelor's degree\",\n                              \"Grade 5\",\n                              \"Doctorate degree\",\n                              \"Grade 3\",\n                              \"Grade 11\",\n                              \"GED or alternative credential\",\n                              \"Grade 9\",\n                              \"12th grade - no diploma\",\n                              \"Grade 10\",\n                              \"Grade 2\",\n                              \"Grade 8\",\n                              \"Some college, but less than 1 year\",\n                              \"Grade 6\"))\n\nFunction to get the mid point of the time range in JWDP and JWAP\n\nmid_time &lt;- function(time_str) {\n  if(is.na(time_str)) {\n    return(NA)\n  }\n  parts &lt;- str_split(time_str, \" to \")\n  t1 &lt;- hm(parts[[1]][1]) \n  diff &lt;- hm(parts[[1]][2]) - t1\n  \n  t1$minute &lt;- t1$minute + (diff$minute %/% 2)\n  if(str_detect(time_str, \"p.m.\")) {\n    t1 &lt;- t1 + hm(\"12:00\")\n  }\n  return(as.character(t1))\n}  \n\nTime mappings for JWDP and JWAP\n\njwdp_map &lt;- c(\"4:10 a.m. to 4:19 a.m.\",\n              \"4:20 a.m. to 4:29 a.m.\",\n              \"4:40 a.m. to 4:49 a.m.\",\n              \"5:15 a.m. to 5:19 a.m.\",\n              \"6:20 a.m. to 6:24 a.m.\",\n              \"7:15 a.m. to 7:19 a.m.\",\n              \"8:50 a.m. to 8:54 a.m.\",\n              \"9:05 a.m. to 9:09 a.m.\",\n              \"9:45 a.m. to 9:49 a.m.\",\n              \"10:00 a.m. to 10:09 a.m.\",\n              \"10:40 a.m. to 10:49 a.m.\",\n              \"11:00 a.m. to 11:09 a.m.\",\n              \"11:10 a.m. to 11:19 a.m.\",\n              \"2:00 p.m. to 2:09 p.m.\",\n              \"2:20 p.m. to 2:29 p.m.\",\n              \"4:30 p.m. to 4:39 p.m.\",\n              \"6:00 p.m. to 6:09 p.m.\",\n              \"6:30 p.m. to 6:39 p.m.\",\n              \"6:40 p.m. to 6:49 p.m.\",\n              \"9:20 p.m. to 9:29 p.m.\",\n              \"9:40 p.m. to 9:49 p.m.\",\n              \"11:00 p.m. to 11:29 p.m.\",\n              \"8:10 a.m. to 8:14 a.m.\",\n              \"8:20 a.m. to 8:24 a.m.\",\n              \"8:40 a.m. to 8:44 a.m.\",\n              \"8:55 a.m. to 8:59 a.m.\",\n              \"9:30 a.m. to 9:34 a.m.\",\n              \"9:55 a.m. to 9:59 a.m.\",\n              \"1:30 p.m. to 1:39 p.m.\",\n              \"1:40 p.m. to 1:49 p.m.\",\n              \"2:10 p.m. to 2:19 p.m.\",\n              \"2:40 p.m. to 2:49 p.m.\",\n              \"3:20 p.m. to 3:29 p.m.\",\n              \"4:10 p.m. to 4:19 p.m.\",\n              \"6:10 p.m. to 6:19 p.m.\",\n              \"11:30 p.m. to 11:59 p.m.\",\n               NA_character_, \n              \"3:30 a.m. to 3:39 a.m.\",\n              \"3:40 a.m. to 3:49 a.m.\",\n              \"5:00 a.m. to 5:04 a.m.\",\n              \"5:45 a.m. to 5:49 a.m.\",\n              \"7:05 a.m. to 7:09 a.m.\",\n              \"7:10 a.m. to 7:14 a.m.\",\n              \"7:20 a.m. to 7:24 a.m.\",\n              \"7:30 a.m. to 7:34 a.m.\",\n              \"7:50 a.m. to 7:54 a.m.\",\n              \"8:00 a.m. to 8:04 a.m.\",\n              \"8:05 a.m. to 8:09 a.m.\",\n              \"10:50 a.m. to 10:59 a.m.\",\n              \"11:50 a.m. to 11:59 a.m.\",\n              \"12:10 p.m. to 12:19 p.m.\",\n              \"3:10 p.m. to 3:19 p.m.\",\n              \"3:30 p.m. to 3:39 p.m.\",\n              \"4:50 p.m. to 4:59 p.m.\",\n              \"6:50 p.m. to 6:59 p.m.\",\n              \"7:00 p.m. to 7:29 p.m.\",\n              \"7:30 p.m. to 7:59 p.m.\",\n              \"3:20 a.m. to 3:29 a.m.\",\n              \"5:20 a.m. to 5:24 a.m.\",\n              \"6:00 a.m. to 6:04 a.m.\",\n              \"6:35 a.m. to 6:39 a.m.\",\n              \"6:45 a.m. to 6:49 a.m.\",\n              \"7:35 a.m. to 7:39 a.m.\",\n              \"8:25 a.m. to 8:29 a.m.\",\n              \"8:35 a.m. to 8:39 a.m.\",\n              \"8:45 a.m. to 8:49 a.m.\",\n              \"9:00 a.m. to 9:04 a.m.\",\n              \"9:10 a.m. to 9:14 a.m.\",\n              \"10:30 a.m. to 10:39 a.m.\",\n              \"12:40 p.m. to 12:49 p.m.\",\n              \"12:50 p.m. to 12:59 p.m.\",\n              \"1:00 p.m. to 1:09 p.m.\",\n              \"4:40 p.m. to 4:49 p.m.\",\n              \"5:00 p.m. to 5:09 p.m.\",\n              \"8:00 p.m. to 8:29 p.m.\",\n              \"1:00 a.m. to 1:29 a.m.\",\n              \"6:10 a.m. to 6:14 a.m.\",\n              \"6:25 a.m. to 6:29 a.m.\",\n              \"6:50 a.m. to 6:54 a.m.\",\n              \"8:30 a.m. to 8:34 a.m.\",\n              \"10:20 a.m. to 10:29 a.m.\",\n              \"12:20 p.m. to 12:29 p.m.\",\n              \"1:10 p.m. to 1:19 p.m.\",\n              \"1:50 p.m. to 1:59 p.m.\",\n              \"3:00 p.m. to 3:09 p.m.\",\n              \"4:00 p.m. to 4:09 p.m.\",\n              \"5:50 p.m. to 5:59 p.m.\",\n              \"10:00 p.m. to 10:09 p.m.\",\n              \"10:20 p.m. to 10:29 p.m.\",\n              \"12:00 a.m. to 12:29 a.m.\",\n              \"2:30 a.m. to 2:59 a.m.\",\n              \"3:50 a.m. to 3:59 a.m.\",\n              \"4:00 a.m. to 4:09 a.m.\",\n              \"4:30 a.m. to 4:39 a.m.\",\n              \"5:30 a.m. to 5:34 a.m.\",\n              \"5:35 a.m. to 5:39 a.m.\",\n              \"5:55 a.m. to 5:59 a.m.\",\n              \"9:50 a.m. to 9:54 a.m.\",\n              \"11:20 a.m. to 11:29 a.m.\",\n              \"11:30 a.m. to 11:39 a.m.\",\n              \"12:30 p.m. to 12:39 p.m.\",\n              \"2:30 p.m. to 2:39 p.m.\",\n              \"2:50 p.m. to 2:59 p.m.\",\n              \"5:10 p.m. to 5:19 p.m.\",\n              \"5:20 p.m. to 5:29 p.m.\",\n              \"5:30 p.m. to 5:39 p.m.\",\n              \"10:10 p.m. to 10:19 p.m.\",\n              \"12:30 a.m. to 12:59 a.m.\",\n              \"1:30 a.m. to 1:59 a.m.\",\n              \"2:00 a.m. to 2:29 a.m.\",\n              \"3:00 a.m. to 3:09 a.m.\",\n              \"5:05 a.m. to 5:09 a.m.\",\n              \"5:10 a.m. to 5:14 a.m.\",\n              \"5:25 a.m. to 5:29 a.m.\",\n              \"5:40 a.m. to 5:44 a.m.\",\n              \"6:15 a.m. to 6:19 a.m.\",\n              \"6:40 a.m. to 6:44 a.m.\",\n              \"6:55 a.m. to 6:59 a.m.\",\n              \"7:00 a.m. to 7:04 a.m.\",\n              \"7:25 a.m. to 7:29 a.m.\",\n              \"7:40 a.m. to 7:44 a.m.\",\n              \"8:15 a.m. to 8:19 a.m.\",\n              \"9:25 a.m. to 9:29 a.m.\",\n              \"9:35 a.m. to 9:39 a.m.\",\n              \"9:40 a.m. to 9:44 a.m.\",\n              \"12:00 p.m. to 12:09 p.m.\",\n              \"3:40 p.m. to 3:49 p.m.\",\n              \"4:20 p.m. to 4:29 p.m.\",\n              \"5:40 p.m. to 5:49 p.m.\",\n              \"6:20 p.m. to 6:29 p.m.\",\n              \"8:30 p.m. to 8:59 p.m.\",\n              \"9:00 p.m. to 9:09 p.m.\",\n              \"9:30 p.m. to 9:39 p.m.\",\n              \"3:10 a.m. to 3:19 a.m.\",\n              \"4:50 a.m. to 4:59 a.m.\",\n              \"5:50 a.m. to 5:54 a.m.\",\n              \"6:05 a.m. to 6:09 a.m.\",\n              \"6:30 a.m. to 6:34 a.m.\",\n              \"7:45 a.m. to 7:49 a.m.\",\n              \"7:55 a.m. to 7:59 a.m.\",\n              \"9:15 a.m. to 9:19 a.m.\",\n              \"9:20 a.m. to 9:24 a.m.\",\n              \"10:10 a.m. to 10:19 a.m.\",\n              \"11:40 a.m. to 11:49 a.m.\",\n              \"1:20 p.m. to 1:29 p.m.\",\n              \"3:50 p.m. to 3:59 p.m.\",\n              \"9:10 p.m. to 9:19 p.m.\",\n              \"9:50 p.m. to 9:59 p.m.\",\n              \"10:30 p.m. to 10:39 p.m.\",\n              \"10:40 p.m. to 10:49 p.m.\",\n              \"10:50 p.m. to 10:59 p.m.\") \nnames(jwdp_map) &lt;-  c(\"014\",\n                      \"015\",\n                      \"017\",\n                      \"022\",\n                      \"035\",\n                      \"046\",\n                      \"065\",\n                      \"068\",\n                      \"076\",\n                      \"079\",\n                      \"083\",\n                      \"085\",\n                      \"086\",\n                      \"103\",\n                      \"105\",\n                      \"118\",\n                      \"127\",\n                      \"130\",\n                      \"131\",\n                      \"139\",\n                      \"141\",\n                      \"149\",\n                      \"057\",\n                      \"059\",\n                      \"063\",\n                      \"066\",\n                      \"073\",\n                      \"078\",\n                      \"100\",\n                      \"101\",\n                      \"104\",\n                      \"107\",\n                      \"111\",\n                      \"116\",\n                      \"128\",\n                      \"150\",\n                      \"0\"  ,\n                      \"010\",\n                      \"011\",\n                      \"019\",\n                      \"028\",\n                      \"044\",\n                      \"045\",\n                      \"047\",\n                      \"049\",\n                      \"053\",\n                      \"055\",\n                      \"056\",\n                      \"084\",\n                      \"090\",\n                      \"092\",\n                      \"110\",\n                      \"112\",\n                      \"120\",\n                      \"132\",\n                      \"133\",\n                      \"134\",\n                      \"009\",\n                      \"023\",\n                      \"031\",\n                      \"038\",\n                      \"040\",\n                      \"050\",\n                      \"060\",\n                      \"062\",\n                      \"064\",\n                      \"067\",\n                      \"069\",\n                      \"082\",\n                      \"095\",\n                      \"096\",\n                      \"097\",\n                      \"119\",\n                      \"121\",\n                      \"135\",\n                      \"003\",\n                      \"033\",\n                      \"036\",\n                      \"041\",\n                      \"061\",\n                      \"081\",\n                      \"093\",\n                      \"098\",\n                      \"102\",\n                      \"109\",\n                      \"115\",\n                      \"126\",\n                      \"143\",\n                      \"145\",\n                      \"001\",\n                      \"006\",\n                      \"012\",\n                      \"013\",\n                      \"016\",\n                      \"025\",\n                      \"026\",\n                      \"030\",\n                      \"077\",\n                      \"087\",\n                      \"088\",\n                      \"094\",\n                      \"106\",\n                      \"108\",\n                      \"122\",\n                      \"123\",\n                      \"124\",\n                      \"144\",\n                      \"002\",\n                      \"004\",\n                      \"005\",\n                      \"007\",\n                      \"020\",\n                      \"021\",\n                      \"024\",\n                      \"027\",\n                      \"034\",\n                      \"039\",\n                      \"042\",\n                      \"043\",\n                      \"048\",\n                      \"051\",\n                      \"058\",\n                      \"072\",\n                      \"074\",\n                      \"075\",\n                      \"091\",\n                      \"113\",\n                      \"117\",\n                      \"125\",\n                      \"129\",\n                      \"136\",\n                      \"137\",\n                      \"140\",\n                      \"008\",\n                      \"018\",\n                      \"029\",\n                      \"032\",\n                      \"037\",\n                      \"052\",\n                      \"054\",\n                      \"070\",\n                      \"071\",\n                      \"080\",\n                      \"089\",\n                      \"099\",\n                      \"114\",\n                      \"138\",\n                      \"142\",\n                      \"146\",\n                      \"147\",\n                      \"148\")\n\n\njwap_map &lt;- c(\"9:40 p.m. to 9:44 p.m.\",\n              \"9:50 p.m. to 9:54 p.m.\",\n              \"9:55 p.m. to 9:59 p.m.\",\n              \"11:00 p.m. to 11:04 p.m.\",\n              \"4:10 a.m. to 4:14 a.m.\",\n              \"5:00 a.m. to 5:04 a.m.\",\n              \"6:30 a.m. to 6:34 a.m.\",\n              \"7:45 a.m. to 7:49 a.m.\",\n              \"8:00 a.m. to 8:04 a.m.\",\n              \"10:20 a.m. to 10:24 a.m.\",\n              \"12:00 p.m. to 12:04 p.m.\",\n              \"12:20 p.m. to 12:24 p.m.\",\n              \"1:45 p.m. to 1:49 p.m.\",\n              \"1:55 p.m. to 1:59 p.m.\",\n              \"2:25 p.m. to 2:29 p.m.\",\n              \"3:30 p.m. to 3:34 p.m.\",\n              \"3:55 p.m. to 3:59 p.m.\",\n              \"4:10 p.m. to 4:14 p.m.\",\n              \"4:40 p.m. to 4:44 p.m.\",\n              \"5:40 p.m. to 5:44 p.m.\",\n              \"6:20 p.m. to 6:24 p.m.\",\n              \"6:30 p.m. to 6:34 p.m.\",\n              \"6:35 p.m. to 6:39 p.m.\",\n              \"6:40 p.m. to 6:44 p.m.\",\n              \"6:50 p.m. to 6:54 p.m.\",\n              \"7:05 p.m. to 7:09 p.m.\",\n              \"7:10 p.m. to 7:14 p.m.\",\n              \"9:05 p.m. to 9:09 p.m.\",\n              \"9:30 p.m. to 9:34 p.m.\",\n              \"9:45 p.m. to 9:49 p.m.\",\n              \"10:00 p.m. to 10:04 p.m.\",\n              \"10:40 p.m. to 10:44 p.m.\",\n              \"10:45 p.m. to 10:49 p.m.\",\n              \"11:10 p.m. to 11:14 p.m.\",\n              \"11:50 p.m. to 11:54 p.m.\",\n              \"12:25 a.m. to 12:29 a.m.\",\n              \"12:40 a.m. to 12:44 a.m.\",\n              \"12:45 a.m. to 12:49 a.m.\",\n              \"1:00 a.m. to 1:04 a.m.\",\n              \"1:30 a.m. to 1:34 a.m.\",\n              \"1:45 a.m. to 1:49 a.m.\",\n              \"2:45 a.m. to 2:49 a.m.\",\n              \"3:25 a.m. to 3:29 a.m.\",\n              \"4:35 a.m. to 4:39 a.m.\",\n              \"5:35 a.m. to 5:39 a.m.\",\n              \"6:25 a.m. to 6:29 a.m.\",\n              \"7:15 a.m. to 7:19 a.m.\",\n              \"7:40 a.m. to 7:44 a.m.\",\n              \"8:35 a.m. to 8:39 a.m.\",\n              \"9:05 a.m. to 9:09 a.m.\",\n              \"10:15 a.m. to 10:19 a.m.\",\n              \"10:30 a.m. to 10:34 a.m.\",\n              \"11:35 a.m. to 11:39 a.m.\",\n              \"1:10 p.m. to 1:14 p.m.\",\n              \"1:50 p.m. to 1:54 p.m.\",\n              \"2:35 p.m. to 2:39 p.m.\",\n              \"4:35 p.m. to 4:39 p.m.\",\n              \"5:00 p.m. to 5:04 p.m.\",\n              \"7:40 p.m. to 7:44 p.m.\",\n              \"7:45 p.m. to 7:49 p.m.\",\n              \"8:40 p.m. to 8:44 p.m.\",\n              \"8:55 p.m. to 8:59 p.m.\",\n              \"9:35 p.m. to 9:39 p.m.\",\n              \"10:55 p.m. to 10:59 p.m.\",\n              \"11:15 p.m. to 11:19 p.m.\",\n              \"12:05 a.m. to 12:09 a.m.\",\n              \"12:15 a.m. to 12:19 a.m.\",\n              \"1:20 a.m. to 1:24 a.m.\",\n              \"3:00 a.m. to 3:04 a.m.\",\n              \"3:05 a.m. to 3:09 a.m.\",\n              \"3:40 a.m. to 3:44 a.m.\",\n              \"3:50 a.m. to 3:54 a.m.\",\n              \"4:20 a.m. to 4:24 a.m.\",\n              \"4:30 a.m. to 4:34 a.m.\",\n              \"4:45 a.m. to 4:49 a.m.\",\n              \"5:55 a.m. to 5:59 a.m.\",\n              \"6:05 a.m. to 6:09 a.m.\",\n              \"6:35 a.m. to 6:39 a.m.\",\n              \"6:45 a.m. to 6:49 a.m.\",\n              \"7:00 a.m. to 7:04 a.m.\",\n              \"7:35 a.m. to 7:39 a.m.\",\n              \"7:50 a.m. to 7:54 a.m.\",\n              \"7:55 a.m. to 7:59 a.m.\",\n              \"8:15 a.m. to 8:19 a.m.\",\n              \"9:55 a.m. to 9:59 a.m.\",\n              \"10:00 a.m. to 10:04 a.m.\",\n              \"10:55 a.m. to 10:59 a.m.\",\n              \"11:10 a.m. to 11:14 a.m.\",\n              \"11:40 a.m. to 11:44 a.m.\",\n              \"12:10 p.m. to 12:14 p.m.\",\n              \"12:30 p.m. to 12:34 p.m.\",\n              \"12:40 p.m. to 12:44 p.m.\",\n              \"12:50 p.m. to 12:54 p.m.\",\n              \"2:00 p.m. to 2:04 p.m.\",\n              \"3:15 p.m. to 3:19 p.m.\",\n              \"3:25 p.m. to 3:29 p.m.\",\n              \"5:15 p.m. to 5:19 p.m.\",\n              \"6:25 p.m. to 6:29 p.m.\",\n              \"7:20 p.m. to 7:24 p.m.\",\n              \"7:35 p.m. to 7:39 p.m.\",\n              \"8:05 p.m. to 8:09 p.m.\",\n              \"8:30 p.m. to 8:34 p.m.\",\n              \"9:20 p.m. to 9:24 p.m.\",\n              \"10:15 p.m. to 10:19 p.m.\",\n              \"10:50 p.m. to 10:54 p.m.\",\n              \"1:10 a.m. to 1:14 a.m.\",\n              \"1:15 a.m. to 1:19 a.m.\",\n              \"1:40 a.m. to 1:44 a.m.\",\n              \"2:00 a.m. to 2:04 a.m.\",\n              \"2:55 a.m. to 2:59 a.m.\",\n              \"3:15 a.m. to 3:19 a.m.\",\n              \"3:35 a.m. to 3:39 a.m.\",\n              \"5:05 a.m. to 5:09 a.m.\",\n              \"5:45 a.m. to 5:49 a.m.\",\n              \"5:50 a.m. to 5:54 a.m.\",\n              \"6:20 a.m. to 6:24 a.m.\",\n              \"6:50 a.m. to 6:54 a.m.\",\n              \"7:10 a.m. to 7:14 a.m.\",\n              \"7:30 a.m. to 7:34 a.m.\",\n              \"8:05 a.m. to 8:09 a.m.\",\n              \"8:30 a.m. to 8:34 a.m.\",\n              \"10:35 a.m. to 10:39 a.m.\",\n              \"11:50 a.m. to 11:54 a.m.\",\n              \"2:30 p.m. to 2:34 p.m.\",\n              \"3:00 p.m. to 3:04 p.m.\",\n              \"3:20 p.m. to 3:24 p.m.\",\n              \"3:35 p.m. to 3:39 p.m.\",\n              \"3:45 p.m. to 3:49 p.m.\",\n              \"4:45 p.m. to 4:49 p.m.\",\n              \"5:20 p.m. to 5:24 p.m.\",\n              \"5:30 p.m. to 5:34 p.m.\",\n              \"5:35 p.m. to 5:39 p.m.\",\n              \"8:25 p.m. to 8:29 p.m.\",\n              \"10:30 p.m. to 10:34 p.m.\",\n              \"10:35 p.m. to 10:39 p.m.\",\n              \"11:25 p.m. to 11:29 p.m.\",\n              \"12:00 a.m. to 12:04 a.m.\",\n              \"12:20 a.m. to 12:24 a.m.\",\n              \"12:30 a.m. to 12:39 a.m.\",\n              \"2:05 a.m. to 2:09 a.m.\",\n              \"2:15 a.m. to 2:19 a.m.\",\n              \"2:35 a.m. to 2:39 a.m.\",\n              \"3:10 a.m. to 3:14 a.m.\",\n              \"3:45 a.m. to 3:49 a.m.\",\n              \"4:00 a.m. to 4:04 a.m.\",\n              \"4:25 a.m. to 4:29 a.m.\",\n              \"4:50 a.m. to 4:54 a.m.\",\n              \"6:15 a.m. to 6:19 a.m.\",\n              \"6:55 a.m. to 6:59 a.m.\",\n              \"8:20 a.m. to 8:24 a.m.\",\n              \"8:45 a.m. to 8:49 a.m.\",\n              \"9:00 a.m. to 9:04 a.m.\",\n              \"9:40 a.m. to 9:44 a.m.\",\n              \"11:25 a.m. to 11:29 a.m.\",\n              \"12:05 p.m. to 12:09 p.m.\",\n              \"12:35 p.m. to 12:39 p.m.\",\n              \"1:15 p.m. to 1:19 p.m.\",\n              \"1:20 p.m. to 1:24 p.m.\",\n              \"1:30 p.m. to 1:34 p.m.\",\n              \"2:20 p.m. to 2:24 p.m.\",\n              \"2:40 p.m. to 2:44 p.m.\",\n              \"3:05 p.m. to 3:09 p.m.\",\n              \"4:20 p.m. to 4:24 p.m.\",\n              \"4:30 p.m. to 4:34 p.m.\",\n              \"5:45 p.m. to 5:49 p.m.\",\n              \"5:50 p.m. to 5:54 p.m.\",\n              \"6:00 p.m. to 6:04 p.m.\",\n              \"8:15 p.m. to 8:19 p.m.\",\n              \"10:10 p.m. to 10:14 p.m.\",\n              \"10:20 p.m. to 10:24 p.m.\",\n              \"1:25 a.m. to 1:29 a.m.\",\n              \"1:35 a.m. to 1:39 a.m.\",\n              \"1:50 a.m. to 1:59 a.m.\",\n              \"2:30 a.m. to 2:34 a.m.\",\n              \"4:40 a.m. to 4:44 a.m.\",\n              \"5:10 a.m. to 5:14 a.m.\",\n              \"5:30 a.m. to 5:34 a.m.\",\n              \"6:00 a.m. to 6:04 a.m.\",\n              \"6:40 a.m. to 6:44 a.m.\",\n              \"7:25 a.m. to 7:29 a.m.\",\n              \"8:55 a.m. to 8:59 a.m.\",\n              \"9:25 a.m. to 9:29 a.m.\",\n              \"10:05 a.m. to 10:09 a.m.\",\n              \"10:25 a.m. to 10:29 a.m.\",\n              \"10:40 a.m. to 10:44 a.m.\",\n              \"11:20 a.m. to 11:24 a.m.\",\n              \"11:45 a.m. to 11:49 a.m.\",\n              \"11:55 a.m. to 11:59 a.m.\",\n              \"12:45 p.m. to 12:49 p.m.\",\n              \"12:55 p.m. to 12:59 p.m.\",\n              \"2:15 p.m. to 2:19 p.m.\",\n              \"3:10 p.m. to 3:14 p.m.\",\n              \"5:05 p.m. to 5:09 p.m.\",\n              \"5:10 p.m. to 5:14 p.m.\",\n              \"5:25 p.m. to 5:29 p.m.\",\n              \"6:05 p.m. to 6:09 p.m.\",\n              \"6:10 p.m. to 6:14 p.m.\",\n              \"6:15 p.m. to 6:19 p.m.\",\n              \"6:45 p.m. to 6:49 p.m.\",\n              \"6:55 p.m. to 6:59 p.m.\",\n              \"8:45 p.m. to 8:49 p.m.\",\n              \"8:50 p.m. to 8:54 p.m.\",\n              \"9:10 p.m. to 9:14 p.m.\",\n              \"9:15 p.m. to 9:19 p.m.\",\n              \"9:25 p.m. to 9:29 p.m.\",\n              \"10:05 p.m. to 10:09 p.m.\",\n              \"10:25 p.m. to 10:29 p.m.\",\n              \"11:20 p.m. to 11:24 p.m.\",\n              \"11:30 p.m. to 11:34 p.m.\",\n              \"11:35 p.m. to 11:39 p.m.\",\n              \"11:40 p.m. to 11:44 p.m.\",\n              NA_character_ , \n              \"12:10 a.m. to 12:14 a.m.\",\n              \"12:50 a.m. to 12:59 a.m.\",\n              \"3:20 a.m. to 3:24 a.m.\",\n              \"4:15 a.m. to 4:19 a.m.\",\n              \"4:55 a.m. to 4:59 a.m.\",\n              \"5:15 a.m. to 5:19 a.m.\",\n              \"5:20 a.m. to 5:24 a.m.\",\n              \"6:10 a.m. to 6:14 a.m.\",\n              \"7:05 a.m. to 7:09 a.m.\",\n              \"8:50 a.m. to 8:54 a.m.\",\n              \"9:10 a.m. to 9:14 a.m.\",\n              \"9:50 a.m. to 9:54 a.m.\",\n              \"10:50 a.m. to 10:54 a.m.\",\n              \"11:15 a.m. to 11:19 a.m.\",\n              \"11:30 a.m. to 11:34 a.m.\",\n              \"12:25 p.m. to 12:29 p.m.\",\n              \"1:00 p.m. to 1:04 p.m.\",\n              \"1:05 p.m. to 1:09 p.m.\",\n              \"1:35 p.m. to 1:39 p.m.\",\n              \"1:40 p.m. to 1:44 p.m.\",\n              \"2:05 p.m. to 2:09 p.m.\",\n              \"2:45 p.m. to 2:49 p.m.\",\n              \"2:55 p.m. to 2:59 p.m.\",\n              \"3:40 p.m. to 3:44 p.m.\",\n              \"4:00 p.m. to 4:04 p.m.\",\n              \"4:05 p.m. to 4:09 p.m.\",\n              \"4:15 p.m. to 4:19 p.m.\",\n              \"4:50 p.m. to 4:54 p.m.\",\n              \"4:55 p.m. to 4:59 p.m.\",\n              \"7:00 p.m. to 7:04 p.m.\",\n              \"7:30 p.m. to 7:34 p.m.\",\n              \"7:50 p.m. to 7:54 p.m.\",\n              \"7:55 p.m. to 7:59 p.m.\",\n              \"8:00 p.m. to 8:04 p.m.\",\n              \"8:10 p.m. to 8:14 p.m.\",\n              \"8:20 p.m. to 8:24 p.m.\",\n              \"8:35 p.m. to 8:39 p.m.\",\n              \"9:00 p.m. to 9:04 p.m.\",\n              \"11:05 p.m. to 11:09 p.m.\",\n              \"11:45 p.m. to 11:49 p.m.\",\n              \"11:55 p.m. to 11:59 p.m.\",\n              \"1:05 a.m. to 1:09 a.m.\",\n              \"2:10 a.m. to 2:14 a.m.\",\n              \"2:20 a.m. to 2:24 a.m.\",\n              \"2:25 a.m. to 2:29 a.m.\",\n              \"2:40 a.m. to 2:44 a.m.\",\n              \"2:50 a.m. to 2:54 a.m.\",\n              \"3:30 a.m. to 3:34 a.m.\",\n              \"3:55 a.m. to 3:59 a.m.\",\n              \"4:05 a.m. to 4:09 a.m.\",\n              \"5:25 a.m. to 5:29 a.m.\",\n              \"5:40 a.m. to 5:44 a.m.\",\n              \"7:20 a.m. to 7:24 a.m.\",\n              \"8:10 a.m. to 8:14 a.m.\",\n              \"8:25 a.m. to 8:29 a.m.\",\n              \"8:40 a.m. to 8:44 a.m.\",\n              \"9:15 a.m. to 9:19 a.m.\",\n              \"9:20 a.m. to 9:24 a.m.\",\n              \"9:30 a.m. to 9:34 a.m.\",\n              \"9:35 a.m. to 9:39 a.m.\",\n              \"9:45 a.m. to 9:49 a.m.\",\n              \"10:10 a.m. to 10:14 a.m.\",\n              \"10:45 a.m. to 10:49 a.m.\",\n              \"11:00 a.m. to 11:04 a.m.\",\n              \"11:05 a.m. to 11:09 a.m.\",\n              \"12:15 p.m. to 12:19 p.m.\",\n              \"1:25 p.m. to 1:29 p.m.\",\n              \"2:10 p.m. to 2:14 p.m.\",\n              \"2:50 p.m. to 2:54 p.m.\",\n              \"3:50 p.m. to 3:54 p.m.\",\n              \"4:25 p.m. to 4:29 p.m.\",\n              \"5:55 p.m. to 5:59 p.m.\",\n              \"7:15 p.m. to 7:19 p.m.\",\n              \"7:25 p.m. to 7:29 p.m.\")\nnames(jwap_map) &lt;- c(\"258\",\n                    \"260\",\n                    \"261\",\n                    \"274\",\n                    \"048\",\n                    \"058\",\n                    \"076\",\n                    \"091\",\n                    \"094\",\n                    \"122\",\n                    \"142\",\n                    \"146\",\n                    \"163\",\n                    \"165\",\n                    \"171\",\n                    \"184\",\n                    \"189\",\n                    \"192\",\n                    \"198\",\n                    \"210\",\n                    \"218\",\n                    \"220\",\n                    \"221\",\n                    \"222\",\n                    \"224\",\n                    \"227\",\n                    \"228\",\n                    \"251\",\n                    \"256\",\n                    \"259\",\n                    \"262\",\n                    \"270\",\n                    \"271\",\n                    \"276\",\n                    \"284\",\n                    \"006\",\n                    \"008\",\n                    \"009\",\n                    \"011\",\n                    \"017\",\n                    \"020\",\n                    \"031\",\n                    \"039\",\n                    \"053\",\n                    \"065\",\n                    \"075\",\n                    \"085\",\n                    \"090\",\n                    \"101\",\n                    \"107\",\n                    \"121\",\n                    \"124\",\n                    \"137\",\n                    \"156\",\n                    \"164\",\n                    \"173\",\n                    \"197\",\n                    \"202\",\n                    \"234\",\n                    \"235\",\n                    \"246\",\n                    \"249\",\n                    \"257\",\n                    \"273\",\n                    \"277\",\n                    \"002\",\n                    \"004\",\n                    \"015\",\n                    \"034\",\n                    \"035\",\n                    \"042\",\n                    \"044\",\n                    \"050\",\n                    \"052\",\n                    \"055\",\n                    \"069\",\n                    \"071\",\n                    \"077\",\n                    \"079\",\n                    \"082\",\n                    \"089\",\n                    \"092\",\n                    \"093\",\n                    \"097\",\n                    \"117\",\n                    \"118\",\n                    \"129\",\n                    \"132\",\n                    \"138\",\n                    \"144\",\n                    \"148\",\n                    \"150\",\n                    \"152\",\n                    \"166\",\n                    \"181\",\n                    \"183\",\n                    \"205\",\n                    \"219\",\n                    \"230\",\n                    \"233\",\n                    \"239\",\n                    \"244\",\n                    \"254\",\n                    \"265\",\n                    \"272\",\n                    \"013\",\n                    \"014\",\n                    \"019\",\n                    \"022\",\n                    \"033\",\n                    \"037\",\n                    \"041\",\n                    \"059\",\n                    \"067\",\n                    \"068\",\n                    \"074\",\n                    \"080\",\n                    \"084\",\n                    \"088\",\n                    \"095\",\n                    \"100\",\n                    \"125\",\n                    \"140\",\n                    \"172\",\n                    \"178\",\n                    \"182\",\n                    \"185\",\n                    \"187\",\n                    \"199\",\n                    \"206\",\n                    \"208\",\n                    \"209\",\n                    \"243\",\n                    \"268\",\n                    \"269\",\n                    \"279\",\n                    \"001\",\n                    \"005\",\n                    \"007\",\n                    \"023\",\n                    \"025\",\n                    \"029\",\n                    \"036\",\n                    \"043\",\n                    \"046\",\n                    \"051\",\n                    \"056\",\n                    \"073\",\n                    \"081\",\n                    \"098\",\n                    \"103\",\n                    \"106\",\n                    \"114\",\n                    \"135\",\n                    \"143\",\n                    \"149\",\n                    \"157\",\n                    \"158\",\n                    \"160\",\n                    \"170\",\n                    \"174\",\n                    \"179\",\n                    \"194\",\n                    \"196\",\n                    \"211\",\n                    \"212\",\n                    \"214\",\n                    \"241\",\n                    \"264\",\n                    \"266\",\n                    \"016\",\n                    \"018\",\n                    \"021\",\n                    \"028\",\n                    \"054\",\n                    \"060\",\n                    \"064\",\n                    \"070\",\n                    \"078\",\n                    \"087\",\n                    \"105\",\n                    \"111\",\n                    \"119\",\n                    \"123\",\n                    \"126\",\n                    \"134\",\n                    \"139\",\n                    \"141\",\n                    \"151\",\n                    \"153\",\n                    \"169\",\n                    \"180\",\n                    \"203\",\n                    \"204\",\n                    \"207\",\n                    \"215\",\n                    \"216\",\n                    \"217\",\n                    \"223\",\n                    \"225\",\n                    \"247\",\n                    \"248\",\n                    \"252\",\n                    \"253\",\n                    \"255\",\n                    \"263\",\n                    \"267\",\n                    \"278\",\n                    \"280\",\n                    \"281\",\n                    \"282\",\n                    \"0\",  \n                    \"003\",\n                    \"010\",\n                    \"038\",\n                    \"049\",\n                    \"057\",\n                    \"061\",\n                    \"062\",\n                    \"072\",\n                    \"083\",\n                    \"104\",\n                    \"108\",\n                    \"116\",\n                    \"128\",\n                    \"133\",\n                    \"136\",\n                    \"147\",\n                    \"154\",\n                    \"155\",\n                    \"161\",\n                    \"162\",\n                    \"167\",\n                    \"175\",\n                    \"177\",\n                    \"186\",\n                    \"190\",\n                    \"191\",\n                    \"193\",\n                    \"200\",\n                    \"201\",\n                    \"226\",\n                    \"232\",\n                    \"236\",\n                    \"237\",\n                    \"238\",\n                    \"240\",\n                    \"242\",\n                    \"245\",\n                    \"250\",\n                    \"275\",\n                    \"283\",\n                    \"285\",\n                    \"012\",\n                    \"024\",\n                    \"026\",\n                    \"027\",\n                    \"030\",\n                    \"032\",\n                    \"040\",\n                    \"045\",\n                    \"047\",\n                    \"063\",\n                    \"066\",\n                    \"086\",\n                    \"096\",\n                    \"099\",\n                    \"102\",\n                    \"109\",\n                    \"110\",\n                    \"112\",\n                    \"113\",\n                    \"115\",\n                    \"120\",\n                    \"127\",\n                    \"130\",\n                    \"131\",\n                    \"145\",\n                    \"159\",\n                    \"168\",\n                    \"176\",\n                    \"188\",\n                    \"195\",\n                    \"213\",\n                    \"229\",\n                    \"231\")\n\nCreating a list of JWAP, JWAP map\n\n#time_lst &lt;- list(jwap = jwap_map, jwdp = jwdp_map)\njwap_map &lt;- sapply(jwap_map, mid_time)\njwdp_map &lt;- sapply(jwdp_map, mid_time)\n\nFunction to query PUMS API,\n\n#num_vars: Numerical variable to be return \n# cat_vars: categorical variable to be return\nget_data &lt;- function(year=2022, num_vars= c(\"PWGTP\", \"AGEP\"),\n                     cat_vars = c(\"SEX\"), geo = \"All\", \n                     filter = list(num_filter=\"\", cat_filter=\"\", geo_filter=\"*\")){\n  if (year &lt; 2010 | year &gt; 2022) {\n    stop (\"year needs to be 2010-2022\")\n  }\n  if(!is.vector(num_vars) | !is.vector(cat_vars)) {\n    stop(\"num_vars and cat_vars both need to be vectors\")\n  }\n  allowed_num &lt;- c(\"PWGTP\", \"AGEP\", \"GASP\", \"GRPIP\",\"JWAP\", \"JWDP\", \"JWMNP\")\n  allowed_cat &lt;- c(\"FER\", \"HHL\", \"HISPEED\", \"JWTRNS\", \"SCH\", \"SCHL\", \"SEX\")\n\n  diff &lt;- setdiff(num_vars, allowed_num)\n  if(length(diff) &gt; 0){\n    stop (\"unknown variable(s) given in num_vars: \", diff)\n  }\n  diff &lt;- setdiff(cat_vars, allowed_cat)\n  if (length(diff) &gt; 0){\n    stop (\"unknown variable(s) given in cat_vars: \", diff) \n  }\n  if (!(geo %in% c(\"All\", \"Region\", \"Division\", \"State\"))){\n    stop (\"unknown geo value given: \", geo)\n  }\n  # Add PWGTP if not present in num_vars\n  if(!( \"PWGTP\" %in% num_vars)) {\n    num_vars &lt;- c(\"PWGPT\", num_vars)\n  }\n  get_str &lt;- \"\"\n  if (geo != \"All\"){\n    geo_str &lt;- paste0(\"&for=\", geo, \":\", filter$geo_filter)\n  }\n  get_str &lt;- paste0(\"pums?get=\",\n                   paste(num_vars, collapse = \",\"),\n                   \",\",\n                   paste(cat_vars, collapse = \",\"),\n                   geo_str,\n                   paste0(\"&\", filter$num_filter),\n                   paste0(\"&\", filter$cat_filter)\n                   )\n  URL &lt;- paste(\"https://api.census.gov/data\", year,\n               \"acs/acs1\", get_str,\n               sep = \"/\",\n               collapse=\"/\")\n  print(URL)\n  tbl &lt;- get_url_data(URL)\n  #https://api.census.gov/data/2022/acs/acs1/pums?get=SEX,PWGTP,MAR&for=region:*&SCHL=\n  #Adding factors for each categorical variables\n  for(ct in cat_vars) {\n    fac &lt;- switch(ct,\n           \"SEX\" = sex_factor,\n           \"FER\" = fer_factor,\n           \"HHL\" = hhl_factor,\n           \"HISPEED\"= hispeed_factor,\n           \"JWTRNS\" = jwtrns_factor,\n           \"SCH\" = sch_factor,\n           \"SCHL\" = schl_factor)\n    # For using column names from a variable need to use !! and !!sym() for use inside factor\n    tbl &lt;- tbl |&gt;\n      mutate(!!ct := factor(!!sym(ct), levels = fac$levels, labels = fac$labels))\n  }\n  #Converting numerical variables' values to numbers and converting time rage vars to mid time\n  tbl &lt;- tbl |&gt;\n        mutate(across(setdiff(num_vars, c(\"JWAP\", \"JWDP\")), as.numeric))\n  tbl &lt;- tbl |&gt;\n    mutate(across(starts_with(\"JW\") & ends_with(\"P\"), \n                      ~ifelse(cur_column() == \"JWDP\", jwdp_map[.], jwap_map[.])\n                      ))\n  \n  return(tbl)\n}\n\nFunction to get data from multiple years as one tibble\n\nget_data_years &lt;- function(years, num_vars= c(\"PWGTP\", \"AGEP\"),\n                     cat_vars = c(\"SEX\"), geo = \"All\", \n                     filter = list(num_filter=\"\", cat_filter=\"\", geo_filter=\"*\")){\n  if(!is.vector(years) | !is.numeric(years)) {\n    stop(\"years needs to be a numeric vector\")\n  }\n  combined_dt &lt;- NULL\n  for (y in years) {\n    if (y &lt; 2010 | y &gt; 2022) {\n      stop (\"year needs to be 2010-2022\")\n    }\n    dt &lt;- get_data(year = y, num_vars = num_vars, cat_vars=cat_vars,\n                           geo = geo, filter =filter)\n    #Adding year in mutate \n    dt &lt;- dt |&gt;\n      mutate(year=y)\n    combined_dt &lt;- bind_rows(combined_dt, dt)\n  }\n  return(combined_dt)\n\n}\n\n#get_data_years(years=c(2021,2022), )\n\nGetting the data with a cat filter and some num_vars with multiple years\n\ndt_tbl &lt;- get_data_years(years=c(2021, 2022, 2010), \n                         num_vars = c(\"PWGTP\", \"GASP\", \"JWAP\", \"JWDP\"),\n                         cat_vars = c(\"SEX\",\"FER\", \"HHL\"),\n                         geo = \"State\",\n                         filter = list(cat_filter=\"SCHL=24\", num_filter=\"\", geo_filter = \"1\"))\n\n[1] \"https://api.census.gov/data/2021/acs/acs1/pums?get=PWGTP,GASP,JWAP,JWDP,SEX,FER,HHL&for=State:1&&SCHL=24\"\n[1] \"https://api.census.gov/data/2022/acs/acs1/pums?get=PWGTP,GASP,JWAP,JWDP,SEX,FER,HHL&for=State:1&&SCHL=24\"\n[1] \"https://api.census.gov/data/2010/acs/acs1/pums?get=PWGTP,GASP,JWAP,JWDP,SEX,FER,HHL&for=State:1&&SCHL=24\"\n\ndt_tbl |&gt;\n  view()"
  },
  {
    "objectID": "API.html#getting-pums-data-using-api",
    "href": "API.html#getting-pums-data-using-api",
    "title": "API",
    "section": "",
    "text": "loading library\n\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter()  masks stats::filter()\n✖ purrr::flatten() masks jsonlite::flatten()\n✖ dplyr::lag()     masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(lubridate)\nlibrary(stringr)\n\nHelper function to parse the return data from Get of a URL. This function extracts the return data’s content. The json content is then parsed into a matrix\n\n# Function to get the data from a url\n# url should contain all the parameters \nget_url_data &lt;- function(url){\n  data &lt;- httr::GET(url)\n  parsed &lt;- fromJSON(rawToChar(data$content))\n  # parsed data(matrix) has column names in the fist row extract that row use it as column name of the parsed data\n  dimnames(parsed)[[2]] &lt;- parsed[1,]\n  #except first row taking the rest of rows of parsed data (matrix) and turn into a tibble\n  data_tbl &lt;- as_tibble(parsed[2:nrow(parsed),])\n}\n\nCreate factors for categorical variables\n\nsex_factor &lt;- list(levels = c(\"1\", \"2\"),\n                   labels = c(\"Male\", \"Female\"))\nfer_factor &lt;- list(levels = c(\"0\",\"1\", \"2\"), \n                   labels = c(\"N/A\", \"Yes\", \"No\"))\nhhl_factor &lt;- list(levels = c(\"0\", \"1\", \"2\", \"3\", \"4\", \"5\"), \n                   labels = c(\"N/A (GQ/vacant)\",\n                              \"English Only\",\n                              \"Spanish\",\n                              \"Other Indo-European languages\",\n                              \"Asian and Pacific Island languages\",\"Other Language\"))\nhispeed_factor &lt;- list(levels = c(\"0\",\"1\", \"2\"), \n                       labels = c(\"N/A (GQ/vacant/no paid access to the internet)\",\n                                  \"Yes\",\"No\"))\njwtrns_factor &lt;- list(levels = c(\"0\",\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\", \"09\", \"10\", \"11\"),\n                       labels = c(\"N/A\", \"Car, truck, or van\", \"Bus\", \n                                  \"Subway or elevated rail\",\n                                  \"Long-distance train or commuter rail\",\n                                  \"Light rail, streetcar, or trolley\",\n                                  \"Ferryboat\", \"Taxicab\",\n                                  \"Motorcycle\", \"Bicycle\", \"Walked\", \"Worked from home\",\n                                  \"Other method\"))\nsch_factor &lt;- list(levels = c(\"0\", \"1\", \"2\", \"3\"),\n                   labels = c(\"N/A (less than 3 years old)\",\n                              \"No, has not attended in the last 3 months\",\n                              \"Yes, public school or public college\",\n                              \"Yes, private school or college or home school\"))\nschl_factor &lt;- list(levels = c(\"16\",\n                              \"01\",\n                              \"04\",\n                              \"03\",\n                              \"07\",\n                              \"23\",\n                              \"19\",\n                              \"22\",\n                              \"10\",\n                              \"20\",\n                              \"0\", \n                              \"02\",\n                              \"21\",\n                              \"08\",\n                              \"24\",\n                              \"06\",\n                              \"14\",\n                              \"17\",\n                              \"12\",\n                              \"15\",\n                              \"13\",\n                              \"05\",\n                              \"11\",\n                              \"18\",\n                              \"09\"),\n                    labels = c(\"Regular high school diploma\",\n                              \"No schooling completed\",\n                              \"Grade 1\",\n                              \"Kindergarten\",\n                              \"Grade 4\",\n                              \"Professional degree beyond a bachelor's degree\",\n                              \"1 or more years of college credit, no degree\",\n                              \"Master's degree\",\n                              \"Grade 7\",\n                              \"Associate's degree\",\n                              \"N/A (less than 3 years old)\",\n                              \"Nursery school, preschool\",\n                              \"Bachelor's degree\",\n                              \"Grade 5\",\n                              \"Doctorate degree\",\n                              \"Grade 3\",\n                              \"Grade 11\",\n                              \"GED or alternative credential\",\n                              \"Grade 9\",\n                              \"12th grade - no diploma\",\n                              \"Grade 10\",\n                              \"Grade 2\",\n                              \"Grade 8\",\n                              \"Some college, but less than 1 year\",\n                              \"Grade 6\"))\n\nFunction to get the mid point of the time range in JWDP and JWAP\n\nmid_time &lt;- function(time_str) {\n  if(is.na(time_str)) {\n    return(NA)\n  }\n  parts &lt;- str_split(time_str, \" to \")\n  t1 &lt;- hm(parts[[1]][1]) \n  diff &lt;- hm(parts[[1]][2]) - t1\n  \n  t1$minute &lt;- t1$minute + (diff$minute %/% 2)\n  if(str_detect(time_str, \"p.m.\")) {\n    t1 &lt;- t1 + hm(\"12:00\")\n  }\n  return(as.character(t1))\n}  \n\nTime mappings for JWDP and JWAP\n\njwdp_map &lt;- c(\"4:10 a.m. to 4:19 a.m.\",\n              \"4:20 a.m. to 4:29 a.m.\",\n              \"4:40 a.m. to 4:49 a.m.\",\n              \"5:15 a.m. to 5:19 a.m.\",\n              \"6:20 a.m. to 6:24 a.m.\",\n              \"7:15 a.m. to 7:19 a.m.\",\n              \"8:50 a.m. to 8:54 a.m.\",\n              \"9:05 a.m. to 9:09 a.m.\",\n              \"9:45 a.m. to 9:49 a.m.\",\n              \"10:00 a.m. to 10:09 a.m.\",\n              \"10:40 a.m. to 10:49 a.m.\",\n              \"11:00 a.m. to 11:09 a.m.\",\n              \"11:10 a.m. to 11:19 a.m.\",\n              \"2:00 p.m. to 2:09 p.m.\",\n              \"2:20 p.m. to 2:29 p.m.\",\n              \"4:30 p.m. to 4:39 p.m.\",\n              \"6:00 p.m. to 6:09 p.m.\",\n              \"6:30 p.m. to 6:39 p.m.\",\n              \"6:40 p.m. to 6:49 p.m.\",\n              \"9:20 p.m. to 9:29 p.m.\",\n              \"9:40 p.m. to 9:49 p.m.\",\n              \"11:00 p.m. to 11:29 p.m.\",\n              \"8:10 a.m. to 8:14 a.m.\",\n              \"8:20 a.m. to 8:24 a.m.\",\n              \"8:40 a.m. to 8:44 a.m.\",\n              \"8:55 a.m. to 8:59 a.m.\",\n              \"9:30 a.m. to 9:34 a.m.\",\n              \"9:55 a.m. to 9:59 a.m.\",\n              \"1:30 p.m. to 1:39 p.m.\",\n              \"1:40 p.m. to 1:49 p.m.\",\n              \"2:10 p.m. to 2:19 p.m.\",\n              \"2:40 p.m. to 2:49 p.m.\",\n              \"3:20 p.m. to 3:29 p.m.\",\n              \"4:10 p.m. to 4:19 p.m.\",\n              \"6:10 p.m. to 6:19 p.m.\",\n              \"11:30 p.m. to 11:59 p.m.\",\n               NA_character_, \n              \"3:30 a.m. to 3:39 a.m.\",\n              \"3:40 a.m. to 3:49 a.m.\",\n              \"5:00 a.m. to 5:04 a.m.\",\n              \"5:45 a.m. to 5:49 a.m.\",\n              \"7:05 a.m. to 7:09 a.m.\",\n              \"7:10 a.m. to 7:14 a.m.\",\n              \"7:20 a.m. to 7:24 a.m.\",\n              \"7:30 a.m. to 7:34 a.m.\",\n              \"7:50 a.m. to 7:54 a.m.\",\n              \"8:00 a.m. to 8:04 a.m.\",\n              \"8:05 a.m. to 8:09 a.m.\",\n              \"10:50 a.m. to 10:59 a.m.\",\n              \"11:50 a.m. to 11:59 a.m.\",\n              \"12:10 p.m. to 12:19 p.m.\",\n              \"3:10 p.m. to 3:19 p.m.\",\n              \"3:30 p.m. to 3:39 p.m.\",\n              \"4:50 p.m. to 4:59 p.m.\",\n              \"6:50 p.m. to 6:59 p.m.\",\n              \"7:00 p.m. to 7:29 p.m.\",\n              \"7:30 p.m. to 7:59 p.m.\",\n              \"3:20 a.m. to 3:29 a.m.\",\n              \"5:20 a.m. to 5:24 a.m.\",\n              \"6:00 a.m. to 6:04 a.m.\",\n              \"6:35 a.m. to 6:39 a.m.\",\n              \"6:45 a.m. to 6:49 a.m.\",\n              \"7:35 a.m. to 7:39 a.m.\",\n              \"8:25 a.m. to 8:29 a.m.\",\n              \"8:35 a.m. to 8:39 a.m.\",\n              \"8:45 a.m. to 8:49 a.m.\",\n              \"9:00 a.m. to 9:04 a.m.\",\n              \"9:10 a.m. to 9:14 a.m.\",\n              \"10:30 a.m. to 10:39 a.m.\",\n              \"12:40 p.m. to 12:49 p.m.\",\n              \"12:50 p.m. to 12:59 p.m.\",\n              \"1:00 p.m. to 1:09 p.m.\",\n              \"4:40 p.m. to 4:49 p.m.\",\n              \"5:00 p.m. to 5:09 p.m.\",\n              \"8:00 p.m. to 8:29 p.m.\",\n              \"1:00 a.m. to 1:29 a.m.\",\n              \"6:10 a.m. to 6:14 a.m.\",\n              \"6:25 a.m. to 6:29 a.m.\",\n              \"6:50 a.m. to 6:54 a.m.\",\n              \"8:30 a.m. to 8:34 a.m.\",\n              \"10:20 a.m. to 10:29 a.m.\",\n              \"12:20 p.m. to 12:29 p.m.\",\n              \"1:10 p.m. to 1:19 p.m.\",\n              \"1:50 p.m. to 1:59 p.m.\",\n              \"3:00 p.m. to 3:09 p.m.\",\n              \"4:00 p.m. to 4:09 p.m.\",\n              \"5:50 p.m. to 5:59 p.m.\",\n              \"10:00 p.m. to 10:09 p.m.\",\n              \"10:20 p.m. to 10:29 p.m.\",\n              \"12:00 a.m. to 12:29 a.m.\",\n              \"2:30 a.m. to 2:59 a.m.\",\n              \"3:50 a.m. to 3:59 a.m.\",\n              \"4:00 a.m. to 4:09 a.m.\",\n              \"4:30 a.m. to 4:39 a.m.\",\n              \"5:30 a.m. to 5:34 a.m.\",\n              \"5:35 a.m. to 5:39 a.m.\",\n              \"5:55 a.m. to 5:59 a.m.\",\n              \"9:50 a.m. to 9:54 a.m.\",\n              \"11:20 a.m. to 11:29 a.m.\",\n              \"11:30 a.m. to 11:39 a.m.\",\n              \"12:30 p.m. to 12:39 p.m.\",\n              \"2:30 p.m. to 2:39 p.m.\",\n              \"2:50 p.m. to 2:59 p.m.\",\n              \"5:10 p.m. to 5:19 p.m.\",\n              \"5:20 p.m. to 5:29 p.m.\",\n              \"5:30 p.m. to 5:39 p.m.\",\n              \"10:10 p.m. to 10:19 p.m.\",\n              \"12:30 a.m. to 12:59 a.m.\",\n              \"1:30 a.m. to 1:59 a.m.\",\n              \"2:00 a.m. to 2:29 a.m.\",\n              \"3:00 a.m. to 3:09 a.m.\",\n              \"5:05 a.m. to 5:09 a.m.\",\n              \"5:10 a.m. to 5:14 a.m.\",\n              \"5:25 a.m. to 5:29 a.m.\",\n              \"5:40 a.m. to 5:44 a.m.\",\n              \"6:15 a.m. to 6:19 a.m.\",\n              \"6:40 a.m. to 6:44 a.m.\",\n              \"6:55 a.m. to 6:59 a.m.\",\n              \"7:00 a.m. to 7:04 a.m.\",\n              \"7:25 a.m. to 7:29 a.m.\",\n              \"7:40 a.m. to 7:44 a.m.\",\n              \"8:15 a.m. to 8:19 a.m.\",\n              \"9:25 a.m. to 9:29 a.m.\",\n              \"9:35 a.m. to 9:39 a.m.\",\n              \"9:40 a.m. to 9:44 a.m.\",\n              \"12:00 p.m. to 12:09 p.m.\",\n              \"3:40 p.m. to 3:49 p.m.\",\n              \"4:20 p.m. to 4:29 p.m.\",\n              \"5:40 p.m. to 5:49 p.m.\",\n              \"6:20 p.m. to 6:29 p.m.\",\n              \"8:30 p.m. to 8:59 p.m.\",\n              \"9:00 p.m. to 9:09 p.m.\",\n              \"9:30 p.m. to 9:39 p.m.\",\n              \"3:10 a.m. to 3:19 a.m.\",\n              \"4:50 a.m. to 4:59 a.m.\",\n              \"5:50 a.m. to 5:54 a.m.\",\n              \"6:05 a.m. to 6:09 a.m.\",\n              \"6:30 a.m. to 6:34 a.m.\",\n              \"7:45 a.m. to 7:49 a.m.\",\n              \"7:55 a.m. to 7:59 a.m.\",\n              \"9:15 a.m. to 9:19 a.m.\",\n              \"9:20 a.m. to 9:24 a.m.\",\n              \"10:10 a.m. to 10:19 a.m.\",\n              \"11:40 a.m. to 11:49 a.m.\",\n              \"1:20 p.m. to 1:29 p.m.\",\n              \"3:50 p.m. to 3:59 p.m.\",\n              \"9:10 p.m. to 9:19 p.m.\",\n              \"9:50 p.m. to 9:59 p.m.\",\n              \"10:30 p.m. to 10:39 p.m.\",\n              \"10:40 p.m. to 10:49 p.m.\",\n              \"10:50 p.m. to 10:59 p.m.\") \nnames(jwdp_map) &lt;-  c(\"014\",\n                      \"015\",\n                      \"017\",\n                      \"022\",\n                      \"035\",\n                      \"046\",\n                      \"065\",\n                      \"068\",\n                      \"076\",\n                      \"079\",\n                      \"083\",\n                      \"085\",\n                      \"086\",\n                      \"103\",\n                      \"105\",\n                      \"118\",\n                      \"127\",\n                      \"130\",\n                      \"131\",\n                      \"139\",\n                      \"141\",\n                      \"149\",\n                      \"057\",\n                      \"059\",\n                      \"063\",\n                      \"066\",\n                      \"073\",\n                      \"078\",\n                      \"100\",\n                      \"101\",\n                      \"104\",\n                      \"107\",\n                      \"111\",\n                      \"116\",\n                      \"128\",\n                      \"150\",\n                      \"0\"  ,\n                      \"010\",\n                      \"011\",\n                      \"019\",\n                      \"028\",\n                      \"044\",\n                      \"045\",\n                      \"047\",\n                      \"049\",\n                      \"053\",\n                      \"055\",\n                      \"056\",\n                      \"084\",\n                      \"090\",\n                      \"092\",\n                      \"110\",\n                      \"112\",\n                      \"120\",\n                      \"132\",\n                      \"133\",\n                      \"134\",\n                      \"009\",\n                      \"023\",\n                      \"031\",\n                      \"038\",\n                      \"040\",\n                      \"050\",\n                      \"060\",\n                      \"062\",\n                      \"064\",\n                      \"067\",\n                      \"069\",\n                      \"082\",\n                      \"095\",\n                      \"096\",\n                      \"097\",\n                      \"119\",\n                      \"121\",\n                      \"135\",\n                      \"003\",\n                      \"033\",\n                      \"036\",\n                      \"041\",\n                      \"061\",\n                      \"081\",\n                      \"093\",\n                      \"098\",\n                      \"102\",\n                      \"109\",\n                      \"115\",\n                      \"126\",\n                      \"143\",\n                      \"145\",\n                      \"001\",\n                      \"006\",\n                      \"012\",\n                      \"013\",\n                      \"016\",\n                      \"025\",\n                      \"026\",\n                      \"030\",\n                      \"077\",\n                      \"087\",\n                      \"088\",\n                      \"094\",\n                      \"106\",\n                      \"108\",\n                      \"122\",\n                      \"123\",\n                      \"124\",\n                      \"144\",\n                      \"002\",\n                      \"004\",\n                      \"005\",\n                      \"007\",\n                      \"020\",\n                      \"021\",\n                      \"024\",\n                      \"027\",\n                      \"034\",\n                      \"039\",\n                      \"042\",\n                      \"043\",\n                      \"048\",\n                      \"051\",\n                      \"058\",\n                      \"072\",\n                      \"074\",\n                      \"075\",\n                      \"091\",\n                      \"113\",\n                      \"117\",\n                      \"125\",\n                      \"129\",\n                      \"136\",\n                      \"137\",\n                      \"140\",\n                      \"008\",\n                      \"018\",\n                      \"029\",\n                      \"032\",\n                      \"037\",\n                      \"052\",\n                      \"054\",\n                      \"070\",\n                      \"071\",\n                      \"080\",\n                      \"089\",\n                      \"099\",\n                      \"114\",\n                      \"138\",\n                      \"142\",\n                      \"146\",\n                      \"147\",\n                      \"148\")\n\n\njwap_map &lt;- c(\"9:40 p.m. to 9:44 p.m.\",\n              \"9:50 p.m. to 9:54 p.m.\",\n              \"9:55 p.m. to 9:59 p.m.\",\n              \"11:00 p.m. to 11:04 p.m.\",\n              \"4:10 a.m. to 4:14 a.m.\",\n              \"5:00 a.m. to 5:04 a.m.\",\n              \"6:30 a.m. to 6:34 a.m.\",\n              \"7:45 a.m. to 7:49 a.m.\",\n              \"8:00 a.m. to 8:04 a.m.\",\n              \"10:20 a.m. to 10:24 a.m.\",\n              \"12:00 p.m. to 12:04 p.m.\",\n              \"12:20 p.m. to 12:24 p.m.\",\n              \"1:45 p.m. to 1:49 p.m.\",\n              \"1:55 p.m. to 1:59 p.m.\",\n              \"2:25 p.m. to 2:29 p.m.\",\n              \"3:30 p.m. to 3:34 p.m.\",\n              \"3:55 p.m. to 3:59 p.m.\",\n              \"4:10 p.m. to 4:14 p.m.\",\n              \"4:40 p.m. to 4:44 p.m.\",\n              \"5:40 p.m. to 5:44 p.m.\",\n              \"6:20 p.m. to 6:24 p.m.\",\n              \"6:30 p.m. to 6:34 p.m.\",\n              \"6:35 p.m. to 6:39 p.m.\",\n              \"6:40 p.m. to 6:44 p.m.\",\n              \"6:50 p.m. to 6:54 p.m.\",\n              \"7:05 p.m. to 7:09 p.m.\",\n              \"7:10 p.m. to 7:14 p.m.\",\n              \"9:05 p.m. to 9:09 p.m.\",\n              \"9:30 p.m. to 9:34 p.m.\",\n              \"9:45 p.m. to 9:49 p.m.\",\n              \"10:00 p.m. to 10:04 p.m.\",\n              \"10:40 p.m. to 10:44 p.m.\",\n              \"10:45 p.m. to 10:49 p.m.\",\n              \"11:10 p.m. to 11:14 p.m.\",\n              \"11:50 p.m. to 11:54 p.m.\",\n              \"12:25 a.m. to 12:29 a.m.\",\n              \"12:40 a.m. to 12:44 a.m.\",\n              \"12:45 a.m. to 12:49 a.m.\",\n              \"1:00 a.m. to 1:04 a.m.\",\n              \"1:30 a.m. to 1:34 a.m.\",\n              \"1:45 a.m. to 1:49 a.m.\",\n              \"2:45 a.m. to 2:49 a.m.\",\n              \"3:25 a.m. to 3:29 a.m.\",\n              \"4:35 a.m. to 4:39 a.m.\",\n              \"5:35 a.m. to 5:39 a.m.\",\n              \"6:25 a.m. to 6:29 a.m.\",\n              \"7:15 a.m. to 7:19 a.m.\",\n              \"7:40 a.m. to 7:44 a.m.\",\n              \"8:35 a.m. to 8:39 a.m.\",\n              \"9:05 a.m. to 9:09 a.m.\",\n              \"10:15 a.m. to 10:19 a.m.\",\n              \"10:30 a.m. to 10:34 a.m.\",\n              \"11:35 a.m. to 11:39 a.m.\",\n              \"1:10 p.m. to 1:14 p.m.\",\n              \"1:50 p.m. to 1:54 p.m.\",\n              \"2:35 p.m. to 2:39 p.m.\",\n              \"4:35 p.m. to 4:39 p.m.\",\n              \"5:00 p.m. to 5:04 p.m.\",\n              \"7:40 p.m. to 7:44 p.m.\",\n              \"7:45 p.m. to 7:49 p.m.\",\n              \"8:40 p.m. to 8:44 p.m.\",\n              \"8:55 p.m. to 8:59 p.m.\",\n              \"9:35 p.m. to 9:39 p.m.\",\n              \"10:55 p.m. to 10:59 p.m.\",\n              \"11:15 p.m. to 11:19 p.m.\",\n              \"12:05 a.m. to 12:09 a.m.\",\n              \"12:15 a.m. to 12:19 a.m.\",\n              \"1:20 a.m. to 1:24 a.m.\",\n              \"3:00 a.m. to 3:04 a.m.\",\n              \"3:05 a.m. to 3:09 a.m.\",\n              \"3:40 a.m. to 3:44 a.m.\",\n              \"3:50 a.m. to 3:54 a.m.\",\n              \"4:20 a.m. to 4:24 a.m.\",\n              \"4:30 a.m. to 4:34 a.m.\",\n              \"4:45 a.m. to 4:49 a.m.\",\n              \"5:55 a.m. to 5:59 a.m.\",\n              \"6:05 a.m. to 6:09 a.m.\",\n              \"6:35 a.m. to 6:39 a.m.\",\n              \"6:45 a.m. to 6:49 a.m.\",\n              \"7:00 a.m. to 7:04 a.m.\",\n              \"7:35 a.m. to 7:39 a.m.\",\n              \"7:50 a.m. to 7:54 a.m.\",\n              \"7:55 a.m. to 7:59 a.m.\",\n              \"8:15 a.m. to 8:19 a.m.\",\n              \"9:55 a.m. to 9:59 a.m.\",\n              \"10:00 a.m. to 10:04 a.m.\",\n              \"10:55 a.m. to 10:59 a.m.\",\n              \"11:10 a.m. to 11:14 a.m.\",\n              \"11:40 a.m. to 11:44 a.m.\",\n              \"12:10 p.m. to 12:14 p.m.\",\n              \"12:30 p.m. to 12:34 p.m.\",\n              \"12:40 p.m. to 12:44 p.m.\",\n              \"12:50 p.m. to 12:54 p.m.\",\n              \"2:00 p.m. to 2:04 p.m.\",\n              \"3:15 p.m. to 3:19 p.m.\",\n              \"3:25 p.m. to 3:29 p.m.\",\n              \"5:15 p.m. to 5:19 p.m.\",\n              \"6:25 p.m. to 6:29 p.m.\",\n              \"7:20 p.m. to 7:24 p.m.\",\n              \"7:35 p.m. to 7:39 p.m.\",\n              \"8:05 p.m. to 8:09 p.m.\",\n              \"8:30 p.m. to 8:34 p.m.\",\n              \"9:20 p.m. to 9:24 p.m.\",\n              \"10:15 p.m. to 10:19 p.m.\",\n              \"10:50 p.m. to 10:54 p.m.\",\n              \"1:10 a.m. to 1:14 a.m.\",\n              \"1:15 a.m. to 1:19 a.m.\",\n              \"1:40 a.m. to 1:44 a.m.\",\n              \"2:00 a.m. to 2:04 a.m.\",\n              \"2:55 a.m. to 2:59 a.m.\",\n              \"3:15 a.m. to 3:19 a.m.\",\n              \"3:35 a.m. to 3:39 a.m.\",\n              \"5:05 a.m. to 5:09 a.m.\",\n              \"5:45 a.m. to 5:49 a.m.\",\n              \"5:50 a.m. to 5:54 a.m.\",\n              \"6:20 a.m. to 6:24 a.m.\",\n              \"6:50 a.m. to 6:54 a.m.\",\n              \"7:10 a.m. to 7:14 a.m.\",\n              \"7:30 a.m. to 7:34 a.m.\",\n              \"8:05 a.m. to 8:09 a.m.\",\n              \"8:30 a.m. to 8:34 a.m.\",\n              \"10:35 a.m. to 10:39 a.m.\",\n              \"11:50 a.m. to 11:54 a.m.\",\n              \"2:30 p.m. to 2:34 p.m.\",\n              \"3:00 p.m. to 3:04 p.m.\",\n              \"3:20 p.m. to 3:24 p.m.\",\n              \"3:35 p.m. to 3:39 p.m.\",\n              \"3:45 p.m. to 3:49 p.m.\",\n              \"4:45 p.m. to 4:49 p.m.\",\n              \"5:20 p.m. to 5:24 p.m.\",\n              \"5:30 p.m. to 5:34 p.m.\",\n              \"5:35 p.m. to 5:39 p.m.\",\n              \"8:25 p.m. to 8:29 p.m.\",\n              \"10:30 p.m. to 10:34 p.m.\",\n              \"10:35 p.m. to 10:39 p.m.\",\n              \"11:25 p.m. to 11:29 p.m.\",\n              \"12:00 a.m. to 12:04 a.m.\",\n              \"12:20 a.m. to 12:24 a.m.\",\n              \"12:30 a.m. to 12:39 a.m.\",\n              \"2:05 a.m. to 2:09 a.m.\",\n              \"2:15 a.m. to 2:19 a.m.\",\n              \"2:35 a.m. to 2:39 a.m.\",\n              \"3:10 a.m. to 3:14 a.m.\",\n              \"3:45 a.m. to 3:49 a.m.\",\n              \"4:00 a.m. to 4:04 a.m.\",\n              \"4:25 a.m. to 4:29 a.m.\",\n              \"4:50 a.m. to 4:54 a.m.\",\n              \"6:15 a.m. to 6:19 a.m.\",\n              \"6:55 a.m. to 6:59 a.m.\",\n              \"8:20 a.m. to 8:24 a.m.\",\n              \"8:45 a.m. to 8:49 a.m.\",\n              \"9:00 a.m. to 9:04 a.m.\",\n              \"9:40 a.m. to 9:44 a.m.\",\n              \"11:25 a.m. to 11:29 a.m.\",\n              \"12:05 p.m. to 12:09 p.m.\",\n              \"12:35 p.m. to 12:39 p.m.\",\n              \"1:15 p.m. to 1:19 p.m.\",\n              \"1:20 p.m. to 1:24 p.m.\",\n              \"1:30 p.m. to 1:34 p.m.\",\n              \"2:20 p.m. to 2:24 p.m.\",\n              \"2:40 p.m. to 2:44 p.m.\",\n              \"3:05 p.m. to 3:09 p.m.\",\n              \"4:20 p.m. to 4:24 p.m.\",\n              \"4:30 p.m. to 4:34 p.m.\",\n              \"5:45 p.m. to 5:49 p.m.\",\n              \"5:50 p.m. to 5:54 p.m.\",\n              \"6:00 p.m. to 6:04 p.m.\",\n              \"8:15 p.m. to 8:19 p.m.\",\n              \"10:10 p.m. to 10:14 p.m.\",\n              \"10:20 p.m. to 10:24 p.m.\",\n              \"1:25 a.m. to 1:29 a.m.\",\n              \"1:35 a.m. to 1:39 a.m.\",\n              \"1:50 a.m. to 1:59 a.m.\",\n              \"2:30 a.m. to 2:34 a.m.\",\n              \"4:40 a.m. to 4:44 a.m.\",\n              \"5:10 a.m. to 5:14 a.m.\",\n              \"5:30 a.m. to 5:34 a.m.\",\n              \"6:00 a.m. to 6:04 a.m.\",\n              \"6:40 a.m. to 6:44 a.m.\",\n              \"7:25 a.m. to 7:29 a.m.\",\n              \"8:55 a.m. to 8:59 a.m.\",\n              \"9:25 a.m. to 9:29 a.m.\",\n              \"10:05 a.m. to 10:09 a.m.\",\n              \"10:25 a.m. to 10:29 a.m.\",\n              \"10:40 a.m. to 10:44 a.m.\",\n              \"11:20 a.m. to 11:24 a.m.\",\n              \"11:45 a.m. to 11:49 a.m.\",\n              \"11:55 a.m. to 11:59 a.m.\",\n              \"12:45 p.m. to 12:49 p.m.\",\n              \"12:55 p.m. to 12:59 p.m.\",\n              \"2:15 p.m. to 2:19 p.m.\",\n              \"3:10 p.m. to 3:14 p.m.\",\n              \"5:05 p.m. to 5:09 p.m.\",\n              \"5:10 p.m. to 5:14 p.m.\",\n              \"5:25 p.m. to 5:29 p.m.\",\n              \"6:05 p.m. to 6:09 p.m.\",\n              \"6:10 p.m. to 6:14 p.m.\",\n              \"6:15 p.m. to 6:19 p.m.\",\n              \"6:45 p.m. to 6:49 p.m.\",\n              \"6:55 p.m. to 6:59 p.m.\",\n              \"8:45 p.m. to 8:49 p.m.\",\n              \"8:50 p.m. to 8:54 p.m.\",\n              \"9:10 p.m. to 9:14 p.m.\",\n              \"9:15 p.m. to 9:19 p.m.\",\n              \"9:25 p.m. to 9:29 p.m.\",\n              \"10:05 p.m. to 10:09 p.m.\",\n              \"10:25 p.m. to 10:29 p.m.\",\n              \"11:20 p.m. to 11:24 p.m.\",\n              \"11:30 p.m. to 11:34 p.m.\",\n              \"11:35 p.m. to 11:39 p.m.\",\n              \"11:40 p.m. to 11:44 p.m.\",\n              NA_character_ , \n              \"12:10 a.m. to 12:14 a.m.\",\n              \"12:50 a.m. to 12:59 a.m.\",\n              \"3:20 a.m. to 3:24 a.m.\",\n              \"4:15 a.m. to 4:19 a.m.\",\n              \"4:55 a.m. to 4:59 a.m.\",\n              \"5:15 a.m. to 5:19 a.m.\",\n              \"5:20 a.m. to 5:24 a.m.\",\n              \"6:10 a.m. to 6:14 a.m.\",\n              \"7:05 a.m. to 7:09 a.m.\",\n              \"8:50 a.m. to 8:54 a.m.\",\n              \"9:10 a.m. to 9:14 a.m.\",\n              \"9:50 a.m. to 9:54 a.m.\",\n              \"10:50 a.m. to 10:54 a.m.\",\n              \"11:15 a.m. to 11:19 a.m.\",\n              \"11:30 a.m. to 11:34 a.m.\",\n              \"12:25 p.m. to 12:29 p.m.\",\n              \"1:00 p.m. to 1:04 p.m.\",\n              \"1:05 p.m. to 1:09 p.m.\",\n              \"1:35 p.m. to 1:39 p.m.\",\n              \"1:40 p.m. to 1:44 p.m.\",\n              \"2:05 p.m. to 2:09 p.m.\",\n              \"2:45 p.m. to 2:49 p.m.\",\n              \"2:55 p.m. to 2:59 p.m.\",\n              \"3:40 p.m. to 3:44 p.m.\",\n              \"4:00 p.m. to 4:04 p.m.\",\n              \"4:05 p.m. to 4:09 p.m.\",\n              \"4:15 p.m. to 4:19 p.m.\",\n              \"4:50 p.m. to 4:54 p.m.\",\n              \"4:55 p.m. to 4:59 p.m.\",\n              \"7:00 p.m. to 7:04 p.m.\",\n              \"7:30 p.m. to 7:34 p.m.\",\n              \"7:50 p.m. to 7:54 p.m.\",\n              \"7:55 p.m. to 7:59 p.m.\",\n              \"8:00 p.m. to 8:04 p.m.\",\n              \"8:10 p.m. to 8:14 p.m.\",\n              \"8:20 p.m. to 8:24 p.m.\",\n              \"8:35 p.m. to 8:39 p.m.\",\n              \"9:00 p.m. to 9:04 p.m.\",\n              \"11:05 p.m. to 11:09 p.m.\",\n              \"11:45 p.m. to 11:49 p.m.\",\n              \"11:55 p.m. to 11:59 p.m.\",\n              \"1:05 a.m. to 1:09 a.m.\",\n              \"2:10 a.m. to 2:14 a.m.\",\n              \"2:20 a.m. to 2:24 a.m.\",\n              \"2:25 a.m. to 2:29 a.m.\",\n              \"2:40 a.m. to 2:44 a.m.\",\n              \"2:50 a.m. to 2:54 a.m.\",\n              \"3:30 a.m. to 3:34 a.m.\",\n              \"3:55 a.m. to 3:59 a.m.\",\n              \"4:05 a.m. to 4:09 a.m.\",\n              \"5:25 a.m. to 5:29 a.m.\",\n              \"5:40 a.m. to 5:44 a.m.\",\n              \"7:20 a.m. to 7:24 a.m.\",\n              \"8:10 a.m. to 8:14 a.m.\",\n              \"8:25 a.m. to 8:29 a.m.\",\n              \"8:40 a.m. to 8:44 a.m.\",\n              \"9:15 a.m. to 9:19 a.m.\",\n              \"9:20 a.m. to 9:24 a.m.\",\n              \"9:30 a.m. to 9:34 a.m.\",\n              \"9:35 a.m. to 9:39 a.m.\",\n              \"9:45 a.m. to 9:49 a.m.\",\n              \"10:10 a.m. to 10:14 a.m.\",\n              \"10:45 a.m. to 10:49 a.m.\",\n              \"11:00 a.m. to 11:04 a.m.\",\n              \"11:05 a.m. to 11:09 a.m.\",\n              \"12:15 p.m. to 12:19 p.m.\",\n              \"1:25 p.m. to 1:29 p.m.\",\n              \"2:10 p.m. to 2:14 p.m.\",\n              \"2:50 p.m. to 2:54 p.m.\",\n              \"3:50 p.m. to 3:54 p.m.\",\n              \"4:25 p.m. to 4:29 p.m.\",\n              \"5:55 p.m. to 5:59 p.m.\",\n              \"7:15 p.m. to 7:19 p.m.\",\n              \"7:25 p.m. to 7:29 p.m.\")\nnames(jwap_map) &lt;- c(\"258\",\n                    \"260\",\n                    \"261\",\n                    \"274\",\n                    \"048\",\n                    \"058\",\n                    \"076\",\n                    \"091\",\n                    \"094\",\n                    \"122\",\n                    \"142\",\n                    \"146\",\n                    \"163\",\n                    \"165\",\n                    \"171\",\n                    \"184\",\n                    \"189\",\n                    \"192\",\n                    \"198\",\n                    \"210\",\n                    \"218\",\n                    \"220\",\n                    \"221\",\n                    \"222\",\n                    \"224\",\n                    \"227\",\n                    \"228\",\n                    \"251\",\n                    \"256\",\n                    \"259\",\n                    \"262\",\n                    \"270\",\n                    \"271\",\n                    \"276\",\n                    \"284\",\n                    \"006\",\n                    \"008\",\n                    \"009\",\n                    \"011\",\n                    \"017\",\n                    \"020\",\n                    \"031\",\n                    \"039\",\n                    \"053\",\n                    \"065\",\n                    \"075\",\n                    \"085\",\n                    \"090\",\n                    \"101\",\n                    \"107\",\n                    \"121\",\n                    \"124\",\n                    \"137\",\n                    \"156\",\n                    \"164\",\n                    \"173\",\n                    \"197\",\n                    \"202\",\n                    \"234\",\n                    \"235\",\n                    \"246\",\n                    \"249\",\n                    \"257\",\n                    \"273\",\n                    \"277\",\n                    \"002\",\n                    \"004\",\n                    \"015\",\n                    \"034\",\n                    \"035\",\n                    \"042\",\n                    \"044\",\n                    \"050\",\n                    \"052\",\n                    \"055\",\n                    \"069\",\n                    \"071\",\n                    \"077\",\n                    \"079\",\n                    \"082\",\n                    \"089\",\n                    \"092\",\n                    \"093\",\n                    \"097\",\n                    \"117\",\n                    \"118\",\n                    \"129\",\n                    \"132\",\n                    \"138\",\n                    \"144\",\n                    \"148\",\n                    \"150\",\n                    \"152\",\n                    \"166\",\n                    \"181\",\n                    \"183\",\n                    \"205\",\n                    \"219\",\n                    \"230\",\n                    \"233\",\n                    \"239\",\n                    \"244\",\n                    \"254\",\n                    \"265\",\n                    \"272\",\n                    \"013\",\n                    \"014\",\n                    \"019\",\n                    \"022\",\n                    \"033\",\n                    \"037\",\n                    \"041\",\n                    \"059\",\n                    \"067\",\n                    \"068\",\n                    \"074\",\n                    \"080\",\n                    \"084\",\n                    \"088\",\n                    \"095\",\n                    \"100\",\n                    \"125\",\n                    \"140\",\n                    \"172\",\n                    \"178\",\n                    \"182\",\n                    \"185\",\n                    \"187\",\n                    \"199\",\n                    \"206\",\n                    \"208\",\n                    \"209\",\n                    \"243\",\n                    \"268\",\n                    \"269\",\n                    \"279\",\n                    \"001\",\n                    \"005\",\n                    \"007\",\n                    \"023\",\n                    \"025\",\n                    \"029\",\n                    \"036\",\n                    \"043\",\n                    \"046\",\n                    \"051\",\n                    \"056\",\n                    \"073\",\n                    \"081\",\n                    \"098\",\n                    \"103\",\n                    \"106\",\n                    \"114\",\n                    \"135\",\n                    \"143\",\n                    \"149\",\n                    \"157\",\n                    \"158\",\n                    \"160\",\n                    \"170\",\n                    \"174\",\n                    \"179\",\n                    \"194\",\n                    \"196\",\n                    \"211\",\n                    \"212\",\n                    \"214\",\n                    \"241\",\n                    \"264\",\n                    \"266\",\n                    \"016\",\n                    \"018\",\n                    \"021\",\n                    \"028\",\n                    \"054\",\n                    \"060\",\n                    \"064\",\n                    \"070\",\n                    \"078\",\n                    \"087\",\n                    \"105\",\n                    \"111\",\n                    \"119\",\n                    \"123\",\n                    \"126\",\n                    \"134\",\n                    \"139\",\n                    \"141\",\n                    \"151\",\n                    \"153\",\n                    \"169\",\n                    \"180\",\n                    \"203\",\n                    \"204\",\n                    \"207\",\n                    \"215\",\n                    \"216\",\n                    \"217\",\n                    \"223\",\n                    \"225\",\n                    \"247\",\n                    \"248\",\n                    \"252\",\n                    \"253\",\n                    \"255\",\n                    \"263\",\n                    \"267\",\n                    \"278\",\n                    \"280\",\n                    \"281\",\n                    \"282\",\n                    \"0\",  \n                    \"003\",\n                    \"010\",\n                    \"038\",\n                    \"049\",\n                    \"057\",\n                    \"061\",\n                    \"062\",\n                    \"072\",\n                    \"083\",\n                    \"104\",\n                    \"108\",\n                    \"116\",\n                    \"128\",\n                    \"133\",\n                    \"136\",\n                    \"147\",\n                    \"154\",\n                    \"155\",\n                    \"161\",\n                    \"162\",\n                    \"167\",\n                    \"175\",\n                    \"177\",\n                    \"186\",\n                    \"190\",\n                    \"191\",\n                    \"193\",\n                    \"200\",\n                    \"201\",\n                    \"226\",\n                    \"232\",\n                    \"236\",\n                    \"237\",\n                    \"238\",\n                    \"240\",\n                    \"242\",\n                    \"245\",\n                    \"250\",\n                    \"275\",\n                    \"283\",\n                    \"285\",\n                    \"012\",\n                    \"024\",\n                    \"026\",\n                    \"027\",\n                    \"030\",\n                    \"032\",\n                    \"040\",\n                    \"045\",\n                    \"047\",\n                    \"063\",\n                    \"066\",\n                    \"086\",\n                    \"096\",\n                    \"099\",\n                    \"102\",\n                    \"109\",\n                    \"110\",\n                    \"112\",\n                    \"113\",\n                    \"115\",\n                    \"120\",\n                    \"127\",\n                    \"130\",\n                    \"131\",\n                    \"145\",\n                    \"159\",\n                    \"168\",\n                    \"176\",\n                    \"188\",\n                    \"195\",\n                    \"213\",\n                    \"229\",\n                    \"231\")\n\nCreating a list of JWAP, JWAP map\n\n#time_lst &lt;- list(jwap = jwap_map, jwdp = jwdp_map)\njwap_map &lt;- sapply(jwap_map, mid_time)\njwdp_map &lt;- sapply(jwdp_map, mid_time)\n\nFunction to query PUMS API,\n\n#num_vars: Numerical variable to be return \n# cat_vars: categorical variable to be return\nget_data &lt;- function(year=2022, num_vars= c(\"PWGTP\", \"AGEP\"),\n                     cat_vars = c(\"SEX\"), geo = \"All\", \n                     filter = list(num_filter=\"\", cat_filter=\"\", geo_filter=\"*\")){\n  if (year &lt; 2010 | year &gt; 2022) {\n    stop (\"year needs to be 2010-2022\")\n  }\n  if(!is.vector(num_vars) | !is.vector(cat_vars)) {\n    stop(\"num_vars and cat_vars both need to be vectors\")\n  }\n  allowed_num &lt;- c(\"PWGTP\", \"AGEP\", \"GASP\", \"GRPIP\",\"JWAP\", \"JWDP\", \"JWMNP\")\n  allowed_cat &lt;- c(\"FER\", \"HHL\", \"HISPEED\", \"JWTRNS\", \"SCH\", \"SCHL\", \"SEX\")\n\n  diff &lt;- setdiff(num_vars, allowed_num)\n  if(length(diff) &gt; 0){\n    stop (\"unknown variable(s) given in num_vars: \", diff)\n  }\n  diff &lt;- setdiff(cat_vars, allowed_cat)\n  if (length(diff) &gt; 0){\n    stop (\"unknown variable(s) given in cat_vars: \", diff) \n  }\n  if (!(geo %in% c(\"All\", \"Region\", \"Division\", \"State\"))){\n    stop (\"unknown geo value given: \", geo)\n  }\n  # Add PWGTP if not present in num_vars\n  if(!( \"PWGTP\" %in% num_vars)) {\n    num_vars &lt;- c(\"PWGPT\", num_vars)\n  }\n  get_str &lt;- \"\"\n  if (geo != \"All\"){\n    geo_str &lt;- paste0(\"&for=\", geo, \":\", filter$geo_filter)\n  }\n  get_str &lt;- paste0(\"pums?get=\",\n                   paste(num_vars, collapse = \",\"),\n                   \",\",\n                   paste(cat_vars, collapse = \",\"),\n                   geo_str,\n                   paste0(\"&\", filter$num_filter),\n                   paste0(\"&\", filter$cat_filter)\n                   )\n  URL &lt;- paste(\"https://api.census.gov/data\", year,\n               \"acs/acs1\", get_str,\n               sep = \"/\",\n               collapse=\"/\")\n  print(URL)\n  tbl &lt;- get_url_data(URL)\n  #https://api.census.gov/data/2022/acs/acs1/pums?get=SEX,PWGTP,MAR&for=region:*&SCHL=\n  #Adding factors for each categorical variables\n  for(ct in cat_vars) {\n    fac &lt;- switch(ct,\n           \"SEX\" = sex_factor,\n           \"FER\" = fer_factor,\n           \"HHL\" = hhl_factor,\n           \"HISPEED\"= hispeed_factor,\n           \"JWTRNS\" = jwtrns_factor,\n           \"SCH\" = sch_factor,\n           \"SCHL\" = schl_factor)\n    # For using column names from a variable need to use !! and !!sym() for use inside factor\n    tbl &lt;- tbl |&gt;\n      mutate(!!ct := factor(!!sym(ct), levels = fac$levels, labels = fac$labels))\n  }\n  #Converting numerical variables' values to numbers and converting time rage vars to mid time\n  tbl &lt;- tbl |&gt;\n        mutate(across(setdiff(num_vars, c(\"JWAP\", \"JWDP\")), as.numeric))\n  tbl &lt;- tbl |&gt;\n    mutate(across(starts_with(\"JW\") & ends_with(\"P\"), \n                      ~ifelse(cur_column() == \"JWDP\", jwdp_map[.], jwap_map[.])\n                      ))\n  \n  return(tbl)\n}\n\nFunction to get data from multiple years as one tibble\n\nget_data_years &lt;- function(years, num_vars= c(\"PWGTP\", \"AGEP\"),\n                     cat_vars = c(\"SEX\"), geo = \"All\", \n                     filter = list(num_filter=\"\", cat_filter=\"\", geo_filter=\"*\")){\n  if(!is.vector(years) | !is.numeric(years)) {\n    stop(\"years needs to be a numeric vector\")\n  }\n  combined_dt &lt;- NULL\n  for (y in years) {\n    if (y &lt; 2010 | y &gt; 2022) {\n      stop (\"year needs to be 2010-2022\")\n    }\n    dt &lt;- get_data(year = y, num_vars = num_vars, cat_vars=cat_vars,\n                           geo = geo, filter =filter)\n    #Adding year in mutate \n    dt &lt;- dt |&gt;\n      mutate(year=y)\n    combined_dt &lt;- bind_rows(combined_dt, dt)\n  }\n  return(combined_dt)\n\n}\n\n#get_data_years(years=c(2021,2022), )\n\nGetting the data with a cat filter and some num_vars with multiple years\n\ndt_tbl &lt;- get_data_years(years=c(2021, 2022, 2010), \n                         num_vars = c(\"PWGTP\", \"GASP\", \"JWAP\", \"JWDP\"),\n                         cat_vars = c(\"SEX\",\"FER\", \"HHL\"),\n                         geo = \"State\",\n                         filter = list(cat_filter=\"SCHL=24\", num_filter=\"\", geo_filter = \"1\"))\n\n[1] \"https://api.census.gov/data/2021/acs/acs1/pums?get=PWGTP,GASP,JWAP,JWDP,SEX,FER,HHL&for=State:1&&SCHL=24\"\n[1] \"https://api.census.gov/data/2022/acs/acs1/pums?get=PWGTP,GASP,JWAP,JWDP,SEX,FER,HHL&for=State:1&&SCHL=24\"\n[1] \"https://api.census.gov/data/2010/acs/acs1/pums?get=PWGTP,GASP,JWAP,JWDP,SEX,FER,HHL&for=State:1&&SCHL=24\"\n\ndt_tbl |&gt;\n  view()"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html",
    "href": "Group10_Project01_ST558_Site.html",
    "title": "API",
    "section": "",
    "text": "Background: To be an effective administrator or researcher of a population requires a deep understanding of the population and the ability to quantify and measure its various aspects. The United States Census Bureau hosts a wealth of information related to the country’s demographics, quality of life, and economic factors. So much data is available, at such different levels, that the data can be a challenge to obtain and analyze. The purpose of this project was to build tools that serve three main purposes:\n\n\n\n\nWrite an API query function to select and neatly organize data from the American Community Survey (ACS1) - Public Use Microdata (“PUMS”) dataset, allowing the user to specify specific data elements they want returned for different survey years.\nWrite a function allowing the user to find mean and standard deviation values for numeric values and counts for character variables.\nSimilarly, write a function that allows the user to observe response distributions for a numeric variable across levels of a character variable."
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#sushila-dawadi-and-evan-gray-group-10",
    "href": "Group10_Project01_ST558_Site.html#sushila-dawadi-and-evan-gray-group-10",
    "title": "API",
    "section": "",
    "text": "Background: To be an effective administrator or researcher of a population requires a deep understanding of the population and the ability to quantify and measure its various aspects. The United States Census Bureau hosts a wealth of information related to the country’s demographics, quality of life, and economic factors. So much data is available, at such different levels, that the data can be a challenge to obtain and analyze. The purpose of this project was to build tools that serve three main purposes:\n\n\n\n\nWrite an API query function to select and neatly organize data from the American Community Survey (ACS1) - Public Use Microdata (“PUMS”) dataset, allowing the user to specify specific data elements they want returned for different survey years.\nWrite a function allowing the user to find mean and standard deviation values for numeric values and counts for character variables.\nSimilarly, write a function that allows the user to observe response distributions for a numeric variable across levels of a character variable."
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#loading-library",
    "href": "Group10_Project01_ST558_Site.html#loading-library",
    "title": "API",
    "section": "loading library",
    "text": "loading library\n\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter()  masks stats::filter()\n✖ purrr::flatten() masks jsonlite::flatten()\n✖ dplyr::lag()     masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(lubridate)\nlibrary(stringr)"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#helper-function-to-parse-the-return-data-from-get-of-a-url",
    "href": "Group10_Project01_ST558_Site.html#helper-function-to-parse-the-return-data-from-get-of-a-url",
    "title": "API",
    "section": "Helper function to parse the return data from Get of a URL",
    "text": "Helper function to parse the return data from Get of a URL\n\n# Function to get the data from a url\n# url should contain all the parameters \nget_url_data &lt;- function(url){\n  data &lt;- httr::GET(url)\n  parsed &lt;- fromJSON(rawToChar(data$content))\n  # parsed data(matrix) has column names in the fist row extract that row use it as column name of the parsed data\n  dimnames(parsed)[[2]] &lt;- parsed[1,]\n  #except first row taking the rest of rows of parsed data (matrix) and turn into a tibble\n  data_tbl &lt;- as_tibble(parsed[2:nrow(parsed),])\n}"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#create-factors-for-categorical-variables",
    "href": "Group10_Project01_ST558_Site.html#create-factors-for-categorical-variables",
    "title": "API",
    "section": "Create factors for categorical variables",
    "text": "Create factors for categorical variables\n\nsex_factor &lt;- list(levels = c(\"1\", \"2\"),\n                   labels = c(\"Male\", \"Female\"))\nfer_factor &lt;- list(levels = c(\"0\",\"1\", \"2\"), \n                   labels = c(\"N/A\", \"Yes\", \"No\"))\nhhl_factor &lt;- list(levels = c(\"0\", \"1\", \"2\", \"3\", \"4\", \"5\"), \n                   labels = c(\"N/A (GQ/vacant)\",\n                              \"English Only\",\n                              \"Spanish\",\n                              \"Other Indo-European languages\",\n                              \"Asian and Pacific Island languages\",\"Other Language\"))\nhispeed_factor &lt;- list(levels = c(\"0\",\"1\", \"2\"), \n                       labels = c(\"N/A (GQ/vacant/no paid access to the internet)\",\n                                  \"Yes\",\"No\"))\njwtrns_factor &lt;- list(levels = c(\"0\",\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\", \"09\", \"10\", \"11\"),\n                       labels = c(\"N/A\", \"Car, truck, or van\", \"Bus\", \n                                  \"Subway or elevated rail\",\n                                  \"Long-distance train or commuter rail\",\n                                  \"Light rail, streetcar, or trolley\",\n                                  \"Ferryboat\", \"Taxicab\",\n                                  \"Motorcycle\", \"Bicycle\", \"Walked\", \"Worked from home\",\n                                  \"Other method\"))\nsch_factor &lt;- list(levels = c(\"0\", \"1\", \"2\", \"3\"),\n                   labels = c(\"N/A (less than 3 years old)\",\n                              \"No, has not attended in the last 3 months\",\n                              \"Yes, public school or public college\",\n                              \"Yes, private school or college or home school\"))\nschl_factor &lt;- list(levels = c(\"16\",\n                              \"01\",\n                              \"04\",\n                              \"03\",\n                              \"07\",\n                              \"23\",\n                              \"19\",\n                              \"22\",\n                              \"10\",\n                              \"20\",\n                              \"0\", \n                              \"02\",\n                              \"21\",\n                              \"08\",\n                              \"24\",\n                              \"06\",\n                              \"14\",\n                              \"17\",\n                              \"12\",\n                              \"15\",\n                              \"13\",\n                              \"05\",\n                              \"11\",\n                              \"18\",\n                              \"09\"),\n                    labels = c(\"Regular high school diploma\",\n                              \"No schooling completed\",\n                              \"Grade 1\",\n                              \"Kindergarten\",\n                              \"Grade 4\",\n                              \"Professional degree beyond a bachelor's degree\",\n                              \"1 or more years of college credit, no degree\",\n                              \"Master's degree\",\n                              \"Grade 7\",\n                              \"Associate's degree\",\n                              \"N/A (less than 3 years old)\",\n                              \"Nursery school, preschool\",\n                              \"Bachelor's degree\",\n                              \"Grade 5\",\n                              \"Doctorate degree\",\n                              \"Grade 3\",\n                              \"Grade 11\",\n                              \"GED or alternative credential\",\n                              \"Grade 9\",\n                              \"12th grade - no diploma\",\n                              \"Grade 10\",\n                              \"Grade 2\",\n                              \"Grade 8\",\n                              \"Some college, but less than 1 year\",\n                              \"Grade 6\"))"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#function-to-get-the-mid-point-of-the-time-range-in-jwdp-and-jwap",
    "href": "Group10_Project01_ST558_Site.html#function-to-get-the-mid-point-of-the-time-range-in-jwdp-and-jwap",
    "title": "API",
    "section": "Function to get the mid point of the time range in JWDP and JWAP",
    "text": "Function to get the mid point of the time range in JWDP and JWAP\n\nmid_time &lt;- function(time_str) {\n  if(is.na(time_str)) {\n    return(NA)\n  }\n  parts &lt;- str_split(time_str, \" to \")\n  t1 &lt;- hm(parts[[1]][1]) \n  diff &lt;- hm(parts[[1]][2]) - t1\n  \n  t1$minute &lt;- t1$minute + (diff$minute %/% 2)\n  if(str_detect(time_str, \"p.m.\")) {\n    t1 &lt;- t1 + hm(\"12:00\")\n  }\n  return(as.character(t1))\n}"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#time-mappings-for-jwdp-and-jwap",
    "href": "Group10_Project01_ST558_Site.html#time-mappings-for-jwdp-and-jwap",
    "title": "API",
    "section": "Time mappings for JWDP and JWAP",
    "text": "Time mappings for JWDP and JWAP\n\njwdp_map &lt;- c(\"4:10 a.m. to 4:19 a.m.\",\n              \"4:20 a.m. to 4:29 a.m.\",\n              \"4:40 a.m. to 4:49 a.m.\",\n              \"5:15 a.m. to 5:19 a.m.\",\n              \"6:20 a.m. to 6:24 a.m.\",\n              \"7:15 a.m. to 7:19 a.m.\",\n              \"8:50 a.m. to 8:54 a.m.\",\n              \"9:05 a.m. to 9:09 a.m.\",\n              \"9:45 a.m. to 9:49 a.m.\",\n              \"10:00 a.m. to 10:09 a.m.\",\n              \"10:40 a.m. to 10:49 a.m.\",\n              \"11:00 a.m. to 11:09 a.m.\",\n              \"11:10 a.m. to 11:19 a.m.\",\n              \"2:00 p.m. to 2:09 p.m.\",\n              \"2:20 p.m. to 2:29 p.m.\",\n              \"4:30 p.m. to 4:39 p.m.\",\n              \"6:00 p.m. to 6:09 p.m.\",\n              \"6:30 p.m. to 6:39 p.m.\",\n              \"6:40 p.m. to 6:49 p.m.\",\n              \"9:20 p.m. to 9:29 p.m.\",\n              \"9:40 p.m. to 9:49 p.m.\",\n              \"11:00 p.m. to 11:29 p.m.\",\n              \"8:10 a.m. to 8:14 a.m.\",\n              \"8:20 a.m. to 8:24 a.m.\",\n              \"8:40 a.m. to 8:44 a.m.\",\n              \"8:55 a.m. to 8:59 a.m.\",\n              \"9:30 a.m. to 9:34 a.m.\",\n              \"9:55 a.m. to 9:59 a.m.\",\n              \"1:30 p.m. to 1:39 p.m.\",\n              \"1:40 p.m. to 1:49 p.m.\",\n              \"2:10 p.m. to 2:19 p.m.\",\n              \"2:40 p.m. to 2:49 p.m.\",\n              \"3:20 p.m. to 3:29 p.m.\",\n              \"4:10 p.m. to 4:19 p.m.\",\n              \"6:10 p.m. to 6:19 p.m.\",\n              \"11:30 p.m. to 11:59 p.m.\",\n               NA_character_, \n              \"3:30 a.m. to 3:39 a.m.\",\n              \"3:40 a.m. to 3:49 a.m.\",\n              \"5:00 a.m. to 5:04 a.m.\",\n              \"5:45 a.m. to 5:49 a.m.\",\n              \"7:05 a.m. to 7:09 a.m.\",\n              \"7:10 a.m. to 7:14 a.m.\",\n              \"7:20 a.m. to 7:24 a.m.\",\n              \"7:30 a.m. to 7:34 a.m.\",\n              \"7:50 a.m. to 7:54 a.m.\",\n              \"8:00 a.m. to 8:04 a.m.\",\n              \"8:05 a.m. to 8:09 a.m.\",\n              \"10:50 a.m. to 10:59 a.m.\",\n              \"11:50 a.m. to 11:59 a.m.\",\n              \"12:10 p.m. to 12:19 p.m.\",\n              \"3:10 p.m. to 3:19 p.m.\",\n              \"3:30 p.m. to 3:39 p.m.\",\n              \"4:50 p.m. to 4:59 p.m.\",\n              \"6:50 p.m. to 6:59 p.m.\",\n              \"7:00 p.m. to 7:29 p.m.\",\n              \"7:30 p.m. to 7:59 p.m.\",\n              \"3:20 a.m. to 3:29 a.m.\",\n              \"5:20 a.m. to 5:24 a.m.\",\n              \"6:00 a.m. to 6:04 a.m.\",\n              \"6:35 a.m. to 6:39 a.m.\",\n              \"6:45 a.m. to 6:49 a.m.\",\n              \"7:35 a.m. to 7:39 a.m.\",\n              \"8:25 a.m. to 8:29 a.m.\",\n              \"8:35 a.m. to 8:39 a.m.\",\n              \"8:45 a.m. to 8:49 a.m.\",\n              \"9:00 a.m. to 9:04 a.m.\",\n              \"9:10 a.m. to 9:14 a.m.\",\n              \"10:30 a.m. to 10:39 a.m.\",\n              \"12:40 p.m. to 12:49 p.m.\",\n              \"12:50 p.m. to 12:59 p.m.\",\n              \"1:00 p.m. to 1:09 p.m.\",\n              \"4:40 p.m. to 4:49 p.m.\",\n              \"5:00 p.m. to 5:09 p.m.\",\n              \"8:00 p.m. to 8:29 p.m.\",\n              \"1:00 a.m. to 1:29 a.m.\",\n              \"6:10 a.m. to 6:14 a.m.\",\n              \"6:25 a.m. to 6:29 a.m.\",\n              \"6:50 a.m. to 6:54 a.m.\",\n              \"8:30 a.m. to 8:34 a.m.\",\n              \"10:20 a.m. to 10:29 a.m.\",\n              \"12:20 p.m. to 12:29 p.m.\",\n              \"1:10 p.m. to 1:19 p.m.\",\n              \"1:50 p.m. to 1:59 p.m.\",\n              \"3:00 p.m. to 3:09 p.m.\",\n              \"4:00 p.m. to 4:09 p.m.\",\n              \"5:50 p.m. to 5:59 p.m.\",\n              \"10:00 p.m. to 10:09 p.m.\",\n              \"10:20 p.m. to 10:29 p.m.\",\n              \"12:00 a.m. to 12:29 a.m.\",\n              \"2:30 a.m. to 2:59 a.m.\",\n              \"3:50 a.m. to 3:59 a.m.\",\n              \"4:00 a.m. to 4:09 a.m.\",\n              \"4:30 a.m. to 4:39 a.m.\",\n              \"5:30 a.m. to 5:34 a.m.\",\n              \"5:35 a.m. to 5:39 a.m.\",\n              \"5:55 a.m. to 5:59 a.m.\",\n              \"9:50 a.m. to 9:54 a.m.\",\n              \"11:20 a.m. to 11:29 a.m.\",\n              \"11:30 a.m. to 11:39 a.m.\",\n              \"12:30 p.m. to 12:39 p.m.\",\n              \"2:30 p.m. to 2:39 p.m.\",\n              \"2:50 p.m. to 2:59 p.m.\",\n              \"5:10 p.m. to 5:19 p.m.\",\n              \"5:20 p.m. to 5:29 p.m.\",\n              \"5:30 p.m. to 5:39 p.m.\",\n              \"10:10 p.m. to 10:19 p.m.\",\n              \"12:30 a.m. to 12:59 a.m.\",\n              \"1:30 a.m. to 1:59 a.m.\",\n              \"2:00 a.m. to 2:29 a.m.\",\n              \"3:00 a.m. to 3:09 a.m.\",\n              \"5:05 a.m. to 5:09 a.m.\",\n              \"5:10 a.m. to 5:14 a.m.\",\n              \"5:25 a.m. to 5:29 a.m.\",\n              \"5:40 a.m. to 5:44 a.m.\",\n              \"6:15 a.m. to 6:19 a.m.\",\n              \"6:40 a.m. to 6:44 a.m.\",\n              \"6:55 a.m. to 6:59 a.m.\",\n              \"7:00 a.m. to 7:04 a.m.\",\n              \"7:25 a.m. to 7:29 a.m.\",\n              \"7:40 a.m. to 7:44 a.m.\",\n              \"8:15 a.m. to 8:19 a.m.\",\n              \"9:25 a.m. to 9:29 a.m.\",\n              \"9:35 a.m. to 9:39 a.m.\",\n              \"9:40 a.m. to 9:44 a.m.\",\n              \"12:00 p.m. to 12:09 p.m.\",\n              \"3:40 p.m. to 3:49 p.m.\",\n              \"4:20 p.m. to 4:29 p.m.\",\n              \"5:40 p.m. to 5:49 p.m.\",\n              \"6:20 p.m. to 6:29 p.m.\",\n              \"8:30 p.m. to 8:59 p.m.\",\n              \"9:00 p.m. to 9:09 p.m.\",\n              \"9:30 p.m. to 9:39 p.m.\",\n              \"3:10 a.m. to 3:19 a.m.\",\n              \"4:50 a.m. to 4:59 a.m.\",\n              \"5:50 a.m. to 5:54 a.m.\",\n              \"6:05 a.m. to 6:09 a.m.\",\n              \"6:30 a.m. to 6:34 a.m.\",\n              \"7:45 a.m. to 7:49 a.m.\",\n              \"7:55 a.m. to 7:59 a.m.\",\n              \"9:15 a.m. to 9:19 a.m.\",\n              \"9:20 a.m. to 9:24 a.m.\",\n              \"10:10 a.m. to 10:19 a.m.\",\n              \"11:40 a.m. to 11:49 a.m.\",\n              \"1:20 p.m. to 1:29 p.m.\",\n              \"3:50 p.m. to 3:59 p.m.\",\n              \"9:10 p.m. to 9:19 p.m.\",\n              \"9:50 p.m. to 9:59 p.m.\",\n              \"10:30 p.m. to 10:39 p.m.\",\n              \"10:40 p.m. to 10:49 p.m.\",\n              \"10:50 p.m. to 10:59 p.m.\") \nnames(jwdp_map) &lt;-  c(\"014\",\n                      \"015\",\n                      \"017\",\n                      \"022\",\n                      \"035\",\n                      \"046\",\n                      \"065\",\n                      \"068\",\n                      \"076\",\n                      \"079\",\n                      \"083\",\n                      \"085\",\n                      \"086\",\n                      \"103\",\n                      \"105\",\n                      \"118\",\n                      \"127\",\n                      \"130\",\n                      \"131\",\n                      \"139\",\n                      \"141\",\n                      \"149\",\n                      \"057\",\n                      \"059\",\n                      \"063\",\n                      \"066\",\n                      \"073\",\n                      \"078\",\n                      \"100\",\n                      \"101\",\n                      \"104\",\n                      \"107\",\n                      \"111\",\n                      \"116\",\n                      \"128\",\n                      \"150\",\n                      \"0\"  ,\n                      \"010\",\n                      \"011\",\n                      \"019\",\n                      \"028\",\n                      \"044\",\n                      \"045\",\n                      \"047\",\n                      \"049\",\n                      \"053\",\n                      \"055\",\n                      \"056\",\n                      \"084\",\n                      \"090\",\n                      \"092\",\n                      \"110\",\n                      \"112\",\n                      \"120\",\n                      \"132\",\n                      \"133\",\n                      \"134\",\n                      \"009\",\n                      \"023\",\n                      \"031\",\n                      \"038\",\n                      \"040\",\n                      \"050\",\n                      \"060\",\n                      \"062\",\n                      \"064\",\n                      \"067\",\n                      \"069\",\n                      \"082\",\n                      \"095\",\n                      \"096\",\n                      \"097\",\n                      \"119\",\n                      \"121\",\n                      \"135\",\n                      \"003\",\n                      \"033\",\n                      \"036\",\n                      \"041\",\n                      \"061\",\n                      \"081\",\n                      \"093\",\n                      \"098\",\n                      \"102\",\n                      \"109\",\n                      \"115\",\n                      \"126\",\n                      \"143\",\n                      \"145\",\n                      \"001\",\n                      \"006\",\n                      \"012\",\n                      \"013\",\n                      \"016\",\n                      \"025\",\n                      \"026\",\n                      \"030\",\n                      \"077\",\n                      \"087\",\n                      \"088\",\n                      \"094\",\n                      \"106\",\n                      \"108\",\n                      \"122\",\n                      \"123\",\n                      \"124\",\n                      \"144\",\n                      \"002\",\n                      \"004\",\n                      \"005\",\n                      \"007\",\n                      \"020\",\n                      \"021\",\n                      \"024\",\n                      \"027\",\n                      \"034\",\n                      \"039\",\n                      \"042\",\n                      \"043\",\n                      \"048\",\n                      \"051\",\n                      \"058\",\n                      \"072\",\n                      \"074\",\n                      \"075\",\n                      \"091\",\n                      \"113\",\n                      \"117\",\n                      \"125\",\n                      \"129\",\n                      \"136\",\n                      \"137\",\n                      \"140\",\n                      \"008\",\n                      \"018\",\n                      \"029\",\n                      \"032\",\n                      \"037\",\n                      \"052\",\n                      \"054\",\n                      \"070\",\n                      \"071\",\n                      \"080\",\n                      \"089\",\n                      \"099\",\n                      \"114\",\n                      \"138\",\n                      \"142\",\n                      \"146\",\n                      \"147\",\n                      \"148\")\n\n\njwap_map &lt;- c(\"9:40 p.m. to 9:44 p.m.\",\n              \"9:50 p.m. to 9:54 p.m.\",\n              \"9:55 p.m. to 9:59 p.m.\",\n              \"11:00 p.m. to 11:04 p.m.\",\n              \"4:10 a.m. to 4:14 a.m.\",\n              \"5:00 a.m. to 5:04 a.m.\",\n              \"6:30 a.m. to 6:34 a.m.\",\n              \"7:45 a.m. to 7:49 a.m.\",\n              \"8:00 a.m. to 8:04 a.m.\",\n              \"10:20 a.m. to 10:24 a.m.\",\n              \"12:00 p.m. to 12:04 p.m.\",\n              \"12:20 p.m. to 12:24 p.m.\",\n              \"1:45 p.m. to 1:49 p.m.\",\n              \"1:55 p.m. to 1:59 p.m.\",\n              \"2:25 p.m. to 2:29 p.m.\",\n              \"3:30 p.m. to 3:34 p.m.\",\n              \"3:55 p.m. to 3:59 p.m.\",\n              \"4:10 p.m. to 4:14 p.m.\",\n              \"4:40 p.m. to 4:44 p.m.\",\n              \"5:40 p.m. to 5:44 p.m.\",\n              \"6:20 p.m. to 6:24 p.m.\",\n              \"6:30 p.m. to 6:34 p.m.\",\n              \"6:35 p.m. to 6:39 p.m.\",\n              \"6:40 p.m. to 6:44 p.m.\",\n              \"6:50 p.m. to 6:54 p.m.\",\n              \"7:05 p.m. to 7:09 p.m.\",\n              \"7:10 p.m. to 7:14 p.m.\",\n              \"9:05 p.m. to 9:09 p.m.\",\n              \"9:30 p.m. to 9:34 p.m.\",\n              \"9:45 p.m. to 9:49 p.m.\",\n              \"10:00 p.m. to 10:04 p.m.\",\n              \"10:40 p.m. to 10:44 p.m.\",\n              \"10:45 p.m. to 10:49 p.m.\",\n              \"11:10 p.m. to 11:14 p.m.\",\n              \"11:50 p.m. to 11:54 p.m.\",\n              \"12:25 a.m. to 12:29 a.m.\",\n              \"12:40 a.m. to 12:44 a.m.\",\n              \"12:45 a.m. to 12:49 a.m.\",\n              \"1:00 a.m. to 1:04 a.m.\",\n              \"1:30 a.m. to 1:34 a.m.\",\n              \"1:45 a.m. to 1:49 a.m.\",\n              \"2:45 a.m. to 2:49 a.m.\",\n              \"3:25 a.m. to 3:29 a.m.\",\n              \"4:35 a.m. to 4:39 a.m.\",\n              \"5:35 a.m. to 5:39 a.m.\",\n              \"6:25 a.m. to 6:29 a.m.\",\n              \"7:15 a.m. to 7:19 a.m.\",\n              \"7:40 a.m. to 7:44 a.m.\",\n              \"8:35 a.m. to 8:39 a.m.\",\n              \"9:05 a.m. to 9:09 a.m.\",\n              \"10:15 a.m. to 10:19 a.m.\",\n              \"10:30 a.m. to 10:34 a.m.\",\n              \"11:35 a.m. to 11:39 a.m.\",\n              \"1:10 p.m. to 1:14 p.m.\",\n              \"1:50 p.m. to 1:54 p.m.\",\n              \"2:35 p.m. to 2:39 p.m.\",\n              \"4:35 p.m. to 4:39 p.m.\",\n              \"5:00 p.m. to 5:04 p.m.\",\n              \"7:40 p.m. to 7:44 p.m.\",\n              \"7:45 p.m. to 7:49 p.m.\",\n              \"8:40 p.m. to 8:44 p.m.\",\n              \"8:55 p.m. to 8:59 p.m.\",\n              \"9:35 p.m. to 9:39 p.m.\",\n              \"10:55 p.m. to 10:59 p.m.\",\n              \"11:15 p.m. to 11:19 p.m.\",\n              \"12:05 a.m. to 12:09 a.m.\",\n              \"12:15 a.m. to 12:19 a.m.\",\n              \"1:20 a.m. to 1:24 a.m.\",\n              \"3:00 a.m. to 3:04 a.m.\",\n              \"3:05 a.m. to 3:09 a.m.\",\n              \"3:40 a.m. to 3:44 a.m.\",\n              \"3:50 a.m. to 3:54 a.m.\",\n              \"4:20 a.m. to 4:24 a.m.\",\n              \"4:30 a.m. to 4:34 a.m.\",\n              \"4:45 a.m. to 4:49 a.m.\",\n              \"5:55 a.m. to 5:59 a.m.\",\n              \"6:05 a.m. to 6:09 a.m.\",\n              \"6:35 a.m. to 6:39 a.m.\",\n              \"6:45 a.m. to 6:49 a.m.\",\n              \"7:00 a.m. to 7:04 a.m.\",\n              \"7:35 a.m. to 7:39 a.m.\",\n              \"7:50 a.m. to 7:54 a.m.\",\n              \"7:55 a.m. to 7:59 a.m.\",\n              \"8:15 a.m. to 8:19 a.m.\",\n              \"9:55 a.m. to 9:59 a.m.\",\n              \"10:00 a.m. to 10:04 a.m.\",\n              \"10:55 a.m. to 10:59 a.m.\",\n              \"11:10 a.m. to 11:14 a.m.\",\n              \"11:40 a.m. to 11:44 a.m.\",\n              \"12:10 p.m. to 12:14 p.m.\",\n              \"12:30 p.m. to 12:34 p.m.\",\n              \"12:40 p.m. to 12:44 p.m.\",\n              \"12:50 p.m. to 12:54 p.m.\",\n              \"2:00 p.m. to 2:04 p.m.\",\n              \"3:15 p.m. to 3:19 p.m.\",\n              \"3:25 p.m. to 3:29 p.m.\",\n              \"5:15 p.m. to 5:19 p.m.\",\n              \"6:25 p.m. to 6:29 p.m.\",\n              \"7:20 p.m. to 7:24 p.m.\",\n              \"7:35 p.m. to 7:39 p.m.\",\n              \"8:05 p.m. to 8:09 p.m.\",\n              \"8:30 p.m. to 8:34 p.m.\",\n              \"9:20 p.m. to 9:24 p.m.\",\n              \"10:15 p.m. to 10:19 p.m.\",\n              \"10:50 p.m. to 10:54 p.m.\",\n              \"1:10 a.m. to 1:14 a.m.\",\n              \"1:15 a.m. to 1:19 a.m.\",\n              \"1:40 a.m. to 1:44 a.m.\",\n              \"2:00 a.m. to 2:04 a.m.\",\n              \"2:55 a.m. to 2:59 a.m.\",\n              \"3:15 a.m. to 3:19 a.m.\",\n              \"3:35 a.m. to 3:39 a.m.\",\n              \"5:05 a.m. to 5:09 a.m.\",\n              \"5:45 a.m. to 5:49 a.m.\",\n              \"5:50 a.m. to 5:54 a.m.\",\n              \"6:20 a.m. to 6:24 a.m.\",\n              \"6:50 a.m. to 6:54 a.m.\",\n              \"7:10 a.m. to 7:14 a.m.\",\n              \"7:30 a.m. to 7:34 a.m.\",\n              \"8:05 a.m. to 8:09 a.m.\",\n              \"8:30 a.m. to 8:34 a.m.\",\n              \"10:35 a.m. to 10:39 a.m.\",\n              \"11:50 a.m. to 11:54 a.m.\",\n              \"2:30 p.m. to 2:34 p.m.\",\n              \"3:00 p.m. to 3:04 p.m.\",\n              \"3:20 p.m. to 3:24 p.m.\",\n              \"3:35 p.m. to 3:39 p.m.\",\n              \"3:45 p.m. to 3:49 p.m.\",\n              \"4:45 p.m. to 4:49 p.m.\",\n              \"5:20 p.m. to 5:24 p.m.\",\n              \"5:30 p.m. to 5:34 p.m.\",\n              \"5:35 p.m. to 5:39 p.m.\",\n              \"8:25 p.m. to 8:29 p.m.\",\n              \"10:30 p.m. to 10:34 p.m.\",\n              \"10:35 p.m. to 10:39 p.m.\",\n              \"11:25 p.m. to 11:29 p.m.\",\n              \"12:00 a.m. to 12:04 a.m.\",\n              \"12:20 a.m. to 12:24 a.m.\",\n              \"12:30 a.m. to 12:39 a.m.\",\n              \"2:05 a.m. to 2:09 a.m.\",\n              \"2:15 a.m. to 2:19 a.m.\",\n              \"2:35 a.m. to 2:39 a.m.\",\n              \"3:10 a.m. to 3:14 a.m.\",\n              \"3:45 a.m. to 3:49 a.m.\",\n              \"4:00 a.m. to 4:04 a.m.\",\n              \"4:25 a.m. to 4:29 a.m.\",\n              \"4:50 a.m. to 4:54 a.m.\",\n              \"6:15 a.m. to 6:19 a.m.\",\n              \"6:55 a.m. to 6:59 a.m.\",\n              \"8:20 a.m. to 8:24 a.m.\",\n              \"8:45 a.m. to 8:49 a.m.\",\n              \"9:00 a.m. to 9:04 a.m.\",\n              \"9:40 a.m. to 9:44 a.m.\",\n              \"11:25 a.m. to 11:29 a.m.\",\n              \"12:05 p.m. to 12:09 p.m.\",\n              \"12:35 p.m. to 12:39 p.m.\",\n              \"1:15 p.m. to 1:19 p.m.\",\n              \"1:20 p.m. to 1:24 p.m.\",\n              \"1:30 p.m. to 1:34 p.m.\",\n              \"2:20 p.m. to 2:24 p.m.\",\n              \"2:40 p.m. to 2:44 p.m.\",\n              \"3:05 p.m. to 3:09 p.m.\",\n              \"4:20 p.m. to 4:24 p.m.\",\n              \"4:30 p.m. to 4:34 p.m.\",\n              \"5:45 p.m. to 5:49 p.m.\",\n              \"5:50 p.m. to 5:54 p.m.\",\n              \"6:00 p.m. to 6:04 p.m.\",\n              \"8:15 p.m. to 8:19 p.m.\",\n              \"10:10 p.m. to 10:14 p.m.\",\n              \"10:20 p.m. to 10:24 p.m.\",\n              \"1:25 a.m. to 1:29 a.m.\",\n              \"1:35 a.m. to 1:39 a.m.\",\n              \"1:50 a.m. to 1:59 a.m.\",\n              \"2:30 a.m. to 2:34 a.m.\",\n              \"4:40 a.m. to 4:44 a.m.\",\n              \"5:10 a.m. to 5:14 a.m.\",\n              \"5:30 a.m. to 5:34 a.m.\",\n              \"6:00 a.m. to 6:04 a.m.\",\n              \"6:40 a.m. to 6:44 a.m.\",\n              \"7:25 a.m. to 7:29 a.m.\",\n              \"8:55 a.m. to 8:59 a.m.\",\n              \"9:25 a.m. to 9:29 a.m.\",\n              \"10:05 a.m. to 10:09 a.m.\",\n              \"10:25 a.m. to 10:29 a.m.\",\n              \"10:40 a.m. to 10:44 a.m.\",\n              \"11:20 a.m. to 11:24 a.m.\",\n              \"11:45 a.m. to 11:49 a.m.\",\n              \"11:55 a.m. to 11:59 a.m.\",\n              \"12:45 p.m. to 12:49 p.m.\",\n              \"12:55 p.m. to 12:59 p.m.\",\n              \"2:15 p.m. to 2:19 p.m.\",\n              \"3:10 p.m. to 3:14 p.m.\",\n              \"5:05 p.m. to 5:09 p.m.\",\n              \"5:10 p.m. to 5:14 p.m.\",\n              \"5:25 p.m. to 5:29 p.m.\",\n              \"6:05 p.m. to 6:09 p.m.\",\n              \"6:10 p.m. to 6:14 p.m.\",\n              \"6:15 p.m. to 6:19 p.m.\",\n              \"6:45 p.m. to 6:49 p.m.\",\n              \"6:55 p.m. to 6:59 p.m.\",\n              \"8:45 p.m. to 8:49 p.m.\",\n              \"8:50 p.m. to 8:54 p.m.\",\n              \"9:10 p.m. to 9:14 p.m.\",\n              \"9:15 p.m. to 9:19 p.m.\",\n              \"9:25 p.m. to 9:29 p.m.\",\n              \"10:05 p.m. to 10:09 p.m.\",\n              \"10:25 p.m. to 10:29 p.m.\",\n              \"11:20 p.m. to 11:24 p.m.\",\n              \"11:30 p.m. to 11:34 p.m.\",\n              \"11:35 p.m. to 11:39 p.m.\",\n              \"11:40 p.m. to 11:44 p.m.\",\n              NA_character_ , \n              \"12:10 a.m. to 12:14 a.m.\",\n              \"12:50 a.m. to 12:59 a.m.\",\n              \"3:20 a.m. to 3:24 a.m.\",\n              \"4:15 a.m. to 4:19 a.m.\",\n              \"4:55 a.m. to 4:59 a.m.\",\n              \"5:15 a.m. to 5:19 a.m.\",\n              \"5:20 a.m. to 5:24 a.m.\",\n              \"6:10 a.m. to 6:14 a.m.\",\n              \"7:05 a.m. to 7:09 a.m.\",\n              \"8:50 a.m. to 8:54 a.m.\",\n              \"9:10 a.m. to 9:14 a.m.\",\n              \"9:50 a.m. to 9:54 a.m.\",\n              \"10:50 a.m. to 10:54 a.m.\",\n              \"11:15 a.m. to 11:19 a.m.\",\n              \"11:30 a.m. to 11:34 a.m.\",\n              \"12:25 p.m. to 12:29 p.m.\",\n              \"1:00 p.m. to 1:04 p.m.\",\n              \"1:05 p.m. to 1:09 p.m.\",\n              \"1:35 p.m. to 1:39 p.m.\",\n              \"1:40 p.m. to 1:44 p.m.\",\n              \"2:05 p.m. to 2:09 p.m.\",\n              \"2:45 p.m. to 2:49 p.m.\",\n              \"2:55 p.m. to 2:59 p.m.\",\n              \"3:40 p.m. to 3:44 p.m.\",\n              \"4:00 p.m. to 4:04 p.m.\",\n              \"4:05 p.m. to 4:09 p.m.\",\n              \"4:15 p.m. to 4:19 p.m.\",\n              \"4:50 p.m. to 4:54 p.m.\",\n              \"4:55 p.m. to 4:59 p.m.\",\n              \"7:00 p.m. to 7:04 p.m.\",\n              \"7:30 p.m. to 7:34 p.m.\",\n              \"7:50 p.m. to 7:54 p.m.\",\n              \"7:55 p.m. to 7:59 p.m.\",\n              \"8:00 p.m. to 8:04 p.m.\",\n              \"8:10 p.m. to 8:14 p.m.\",\n              \"8:20 p.m. to 8:24 p.m.\",\n              \"8:35 p.m. to 8:39 p.m.\",\n              \"9:00 p.m. to 9:04 p.m.\",\n              \"11:05 p.m. to 11:09 p.m.\",\n              \"11:45 p.m. to 11:49 p.m.\",\n              \"11:55 p.m. to 11:59 p.m.\",\n              \"1:05 a.m. to 1:09 a.m.\",\n              \"2:10 a.m. to 2:14 a.m.\",\n              \"2:20 a.m. to 2:24 a.m.\",\n              \"2:25 a.m. to 2:29 a.m.\",\n              \"2:40 a.m. to 2:44 a.m.\",\n              \"2:50 a.m. to 2:54 a.m.\",\n              \"3:30 a.m. to 3:34 a.m.\",\n              \"3:55 a.m. to 3:59 a.m.\",\n              \"4:05 a.m. to 4:09 a.m.\",\n              \"5:25 a.m. to 5:29 a.m.\",\n              \"5:40 a.m. to 5:44 a.m.\",\n              \"7:20 a.m. to 7:24 a.m.\",\n              \"8:10 a.m. to 8:14 a.m.\",\n              \"8:25 a.m. to 8:29 a.m.\",\n              \"8:40 a.m. to 8:44 a.m.\",\n              \"9:15 a.m. to 9:19 a.m.\",\n              \"9:20 a.m. to 9:24 a.m.\",\n              \"9:30 a.m. to 9:34 a.m.\",\n              \"9:35 a.m. to 9:39 a.m.\",\n              \"9:45 a.m. to 9:49 a.m.\",\n              \"10:10 a.m. to 10:14 a.m.\",\n              \"10:45 a.m. to 10:49 a.m.\",\n              \"11:00 a.m. to 11:04 a.m.\",\n              \"11:05 a.m. to 11:09 a.m.\",\n              \"12:15 p.m. to 12:19 p.m.\",\n              \"1:25 p.m. to 1:29 p.m.\",\n              \"2:10 p.m. to 2:14 p.m.\",\n              \"2:50 p.m. to 2:54 p.m.\",\n              \"3:50 p.m. to 3:54 p.m.\",\n              \"4:25 p.m. to 4:29 p.m.\",\n              \"5:55 p.m. to 5:59 p.m.\",\n              \"7:15 p.m. to 7:19 p.m.\",\n              \"7:25 p.m. to 7:29 p.m.\")\nnames(jwap_map) &lt;- c(\"258\",\n                    \"260\",\n                    \"261\",\n                    \"274\",\n                    \"048\",\n                    \"058\",\n                    \"076\",\n                    \"091\",\n                    \"094\",\n                    \"122\",\n                    \"142\",\n                    \"146\",\n                    \"163\",\n                    \"165\",\n                    \"171\",\n                    \"184\",\n                    \"189\",\n                    \"192\",\n                    \"198\",\n                    \"210\",\n                    \"218\",\n                    \"220\",\n                    \"221\",\n                    \"222\",\n                    \"224\",\n                    \"227\",\n                    \"228\",\n                    \"251\",\n                    \"256\",\n                    \"259\",\n                    \"262\",\n                    \"270\",\n                    \"271\",\n                    \"276\",\n                    \"284\",\n                    \"006\",\n                    \"008\",\n                    \"009\",\n                    \"011\",\n                    \"017\",\n                    \"020\",\n                    \"031\",\n                    \"039\",\n                    \"053\",\n                    \"065\",\n                    \"075\",\n                    \"085\",\n                    \"090\",\n                    \"101\",\n                    \"107\",\n                    \"121\",\n                    \"124\",\n                    \"137\",\n                    \"156\",\n                    \"164\",\n                    \"173\",\n                    \"197\",\n                    \"202\",\n                    \"234\",\n                    \"235\",\n                    \"246\",\n                    \"249\",\n                    \"257\",\n                    \"273\",\n                    \"277\",\n                    \"002\",\n                    \"004\",\n                    \"015\",\n                    \"034\",\n                    \"035\",\n                    \"042\",\n                    \"044\",\n                    \"050\",\n                    \"052\",\n                    \"055\",\n                    \"069\",\n                    \"071\",\n                    \"077\",\n                    \"079\",\n                    \"082\",\n                    \"089\",\n                    \"092\",\n                    \"093\",\n                    \"097\",\n                    \"117\",\n                    \"118\",\n                    \"129\",\n                    \"132\",\n                    \"138\",\n                    \"144\",\n                    \"148\",\n                    \"150\",\n                    \"152\",\n                    \"166\",\n                    \"181\",\n                    \"183\",\n                    \"205\",\n                    \"219\",\n                    \"230\",\n                    \"233\",\n                    \"239\",\n                    \"244\",\n                    \"254\",\n                    \"265\",\n                    \"272\",\n                    \"013\",\n                    \"014\",\n                    \"019\",\n                    \"022\",\n                    \"033\",\n                    \"037\",\n                    \"041\",\n                    \"059\",\n                    \"067\",\n                    \"068\",\n                    \"074\",\n                    \"080\",\n                    \"084\",\n                    \"088\",\n                    \"095\",\n                    \"100\",\n                    \"125\",\n                    \"140\",\n                    \"172\",\n                    \"178\",\n                    \"182\",\n                    \"185\",\n                    \"187\",\n                    \"199\",\n                    \"206\",\n                    \"208\",\n                    \"209\",\n                    \"243\",\n                    \"268\",\n                    \"269\",\n                    \"279\",\n                    \"001\",\n                    \"005\",\n                    \"007\",\n                    \"023\",\n                    \"025\",\n                    \"029\",\n                    \"036\",\n                    \"043\",\n                    \"046\",\n                    \"051\",\n                    \"056\",\n                    \"073\",\n                    \"081\",\n                    \"098\",\n                    \"103\",\n                    \"106\",\n                    \"114\",\n                    \"135\",\n                    \"143\",\n                    \"149\",\n                    \"157\",\n                    \"158\",\n                    \"160\",\n                    \"170\",\n                    \"174\",\n                    \"179\",\n                    \"194\",\n                    \"196\",\n                    \"211\",\n                    \"212\",\n                    \"214\",\n                    \"241\",\n                    \"264\",\n                    \"266\",\n                    \"016\",\n                    \"018\",\n                    \"021\",\n                    \"028\",\n                    \"054\",\n                    \"060\",\n                    \"064\",\n                    \"070\",\n                    \"078\",\n                    \"087\",\n                    \"105\",\n                    \"111\",\n                    \"119\",\n                    \"123\",\n                    \"126\",\n                    \"134\",\n                    \"139\",\n                    \"141\",\n                    \"151\",\n                    \"153\",\n                    \"169\",\n                    \"180\",\n                    \"203\",\n                    \"204\",\n                    \"207\",\n                    \"215\",\n                    \"216\",\n                    \"217\",\n                    \"223\",\n                    \"225\",\n                    \"247\",\n                    \"248\",\n                    \"252\",\n                    \"253\",\n                    \"255\",\n                    \"263\",\n                    \"267\",\n                    \"278\",\n                    \"280\",\n                    \"281\",\n                    \"282\",\n                    \"0\",  \n                    \"003\",\n                    \"010\",\n                    \"038\",\n                    \"049\",\n                    \"057\",\n                    \"061\",\n                    \"062\",\n                    \"072\",\n                    \"083\",\n                    \"104\",\n                    \"108\",\n                    \"116\",\n                    \"128\",\n                    \"133\",\n                    \"136\",\n                    \"147\",\n                    \"154\",\n                    \"155\",\n                    \"161\",\n                    \"162\",\n                    \"167\",\n                    \"175\",\n                    \"177\",\n                    \"186\",\n                    \"190\",\n                    \"191\",\n                    \"193\",\n                    \"200\",\n                    \"201\",\n                    \"226\",\n                    \"232\",\n                    \"236\",\n                    \"237\",\n                    \"238\",\n                    \"240\",\n                    \"242\",\n                    \"245\",\n                    \"250\",\n                    \"275\",\n                    \"283\",\n                    \"285\",\n                    \"012\",\n                    \"024\",\n                    \"026\",\n                    \"027\",\n                    \"030\",\n                    \"032\",\n                    \"040\",\n                    \"045\",\n                    \"047\",\n                    \"063\",\n                    \"066\",\n                    \"086\",\n                    \"096\",\n                    \"099\",\n                    \"102\",\n                    \"109\",\n                    \"110\",\n                    \"112\",\n                    \"113\",\n                    \"115\",\n                    \"120\",\n                    \"127\",\n                    \"130\",\n                    \"131\",\n                    \"145\",\n                    \"159\",\n                    \"168\",\n                    \"176\",\n                    \"188\",\n                    \"195\",\n                    \"213\",\n                    \"229\",\n                    \"231\")"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#creating-a-list-of-jwap-jwap-map",
    "href": "Group10_Project01_ST558_Site.html#creating-a-list-of-jwap-jwap-map",
    "title": "API",
    "section": "Creating a list of JWAP, JWAP map",
    "text": "Creating a list of JWAP, JWAP map\n\n#time_lst &lt;- list(jwap = jwap_map, jwdp = jwdp_map)\njwap_map &lt;- sapply(jwap_map, mid_time)\njwdp_map &lt;- sapply(jwdp_map, mid_time)"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#function-to-get-data-from-multiple-years-as-one-tibble",
    "href": "Group10_Project01_ST558_Site.html#function-to-get-data-from-multiple-years-as-one-tibble",
    "title": "API",
    "section": "Function to get data from multiple years as one tibble",
    "text": "Function to get data from multiple years as one tibble\n\nget_data_years &lt;- function(years, num_vars= c(\"PWGTP\", \"AGEP\"),\n                     cat_vars = c(\"SEX\"), geo = \"All\", \n                     filter = list(num_filter=\"\", cat_filter=\"\", geo_filter=\"*\")){\n  if(!is.vector(years) | !is.numeric(years)) {\n    stop(\"years needs to be a numeric vector\")\n  }\n  combined_dt &lt;- NULL\n  for (y in years) {\n    if (y &lt; 2010 | y &gt; 2022) {\n      stop (\"year needs to be 2010-2022\")\n    }\n    dt &lt;- get_data(year = y, num_vars = num_vars, cat_vars=cat_vars,\n                           geo = geo, filter =filter)\n    #Adding year in mutate \n    dt &lt;- dt |&gt;\n      mutate(year=y)\n    combined_dt &lt;- bind_rows(combined_dt, dt)\n  }\n  return(combined_dt)\n\n}\n\n#get_data_years(years=c(2021,2022), )"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#getting-the-data",
    "href": "Group10_Project01_ST558_Site.html#getting-the-data",
    "title": "API",
    "section": "Getting the data",
    "text": "Getting the data\n\ndt_tbl &lt;- get_data_years(years=c(2021, 2022), \n                         num_vars = c(\"PWGTP\", \"AGEP\", \"GASP\", \"GRPIP\",\"JWMNP\"),\n                         cat_vars = c(\"FER\", \"HHL\", \"HISPEED\",\"SCH\", \"SCHL\", \"SEX\"),\n                         geo = \"State\",\n                         filter = list(cat_filter=\"SCHL=24\", num_filter=\"\", geo_filter = \"1\"))\n\n[1] \"https://api.census.gov/data/2021/acs/acs1/pums?get=PWGTP,AGEP,GASP,GRPIP,JWMNP,FER,HHL,HISPEED,SCH,SCHL,SEX&for=State:1&&SCHL=24\"\n\n\nWarning: The `x` argument of `as_tibble.matrix()` must have unique column names if\n`.name_repair` is omitted as of tibble 2.0.0.\nℹ Using compatibility `.name_repair`.\n\n\n[1] \"https://api.census.gov/data/2022/acs/acs1/pums?get=PWGTP,AGEP,GASP,GRPIP,JWMNP,FER,HHL,HISPEED,SCH,SCHL,SEX&for=State:1&&SCHL=24\"\n\ndt_tbl\n\n# A tibble: 948 × 14\n   PWGTP  AGEP  GASP GRPIP JWMNP    FER   HHL    HISPEED SCH   SCHL  SEX   V12  \n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;fct&gt; &lt;fct&gt;  &lt;fct&gt;   &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;chr&gt;\n 1   180    93     3     0 6H 2M 0S N/A   N/A (… N/A (G… No, … Doct… Fema… 24   \n 2    25    93     3     0 6H 2M 0S N/A   N/A (… N/A (G… No, … Doct… Fema… 24   \n 3    19    50   470     0 6H 2M 0S No    Engli… Yes     No, … Doct… Fema… 24   \n 4    64    48    40     0 6H 2M 0S N/A   Engli… Yes     No, … Doct… Male  24   \n 5     6    64    60     0 6H 2M 0S N/A   Engli… Yes     No, … Doct… Male  24   \n 6    74    61     3     0 6H 2M 0S N/A   Engli… Yes     No, … Doct… Male  24   \n 7   237    34     3     0 6H 2M 0S No    Engli… Yes     No, … Doct… Fema… 24   \n 8   191    45     3     0 6H 2M 0S No    Engli… Yes     No, … Doct… Fema… 24   \n 9    58    30     3    13 6H 2M 0S No    Engli… Yes     No, … Doct… Fema… 24   \n10    49    35     3    13 6H 2M 0S N/A   Engli… Yes     No, … Doct… Male  24   \n# ℹ 938 more rows\n# ℹ 2 more variables: state &lt;chr&gt;, year &lt;dbl&gt;"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#remove-duplicates",
    "href": "Group10_Project01_ST558_Site.html#remove-duplicates",
    "title": "API",
    "section": "Remove Duplicates",
    "text": "Remove Duplicates\n\n#distinct function in case query returns duplicate records\ndt_tbl_dist &lt;- distinct(dt_tbl)"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#apply-census-class",
    "href": "Group10_Project01_ST558_Site.html#apply-census-class",
    "title": "API",
    "section": "Apply Census Class",
    "text": "Apply Census Class\n\nclass(dt_tbl_dist) &lt;- c(\"census\", class(dt_tbl_dist))"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#test-summary-function",
    "href": "Group10_Project01_ST558_Site.html#test-summary-function",
    "title": "API",
    "section": "Test Summary Function",
    "text": "Test Summary Function\n\n#No variable selections\nsummaryfx(tib)\n\n[1] \"Numeric Variable Summaries\"\n[[1]]\n AGEP Mean  GASP Mean GRPIP Mean JWMNP Mean \n 54.693853  47.599511   3.287145         NA \n\n[[2]]\n AGEP StdDev  GASP StdDev GRPIP StdDev JWMNP StdDev \n    57.89510    115.50904     12.34938           NA \n\n# A tibble: 3 × 2\n  FER   count\n  &lt;fct&gt; &lt;dbl&gt;\n1 N/A   66979\n2 Yes     591\n3 No    19104\n# A tibble: 6 × 2\n  HHL                                count\n  &lt;fct&gt;                              &lt;dbl&gt;\n1 N/A (GQ/vacant)                      214\n2 English Only                       71437\n3 Spanish                             3195\n4 Other Indo-European languages       4676\n5 Asian and Pacific Island languages  5344\n6 Other Language                      1808\n# A tibble: 3 × 2\n  HISPEED                                        count\n  &lt;fct&gt;                                          &lt;dbl&gt;\n1 N/A (GQ/vacant/no paid access to the internet)  3317\n2 Yes                                            73876\n3 No                                              9481\n# A tibble: 3 × 2\n  SCH                                           count\n  &lt;fct&gt;                                         &lt;dbl&gt;\n1 No, has not attended in the last 3 months     82130\n2 Yes, public school or public college           3160\n3 Yes, private school or college or home school  1384\n# A tibble: 1 × 2\n  SCHL             count\n  &lt;fct&gt;            &lt;dbl&gt;\n1 Doctorate degree 86674\n# A tibble: 2 × 2\n  SEX    count\n  &lt;fct&gt;  &lt;dbl&gt;\n1 Male   49899\n2 Female 36775\n\n\n\n#Function with selected variables\nsummaryfx(tib, numvars = c(\"AGEP\",\"GRPIP\"), charvars = \"SCH\")\n\n[1] \"Numeric Variable Summaries\"\n[[1]]\n AGEP Mean GRPIP Mean \n 54.693853   3.287145 \n\n[[2]]\n AGEP StdDev GRPIP StdDev \n    57.89510     12.34938 \n\n# A tibble: 3 × 2\n  SCH                                           count\n  &lt;fct&gt;                                         &lt;dbl&gt;\n1 No, has not attended in the last 3 months     82130\n2 Yes, public school or public college           3160\n3 Yes, private school or college or home school  1384"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#plot-function",
    "href": "Group10_Project01_ST558_Site.html#plot-function",
    "title": "API",
    "section": "Plot Function",
    "text": "Plot Function\n\nplotfx &lt;- function(tib, numvars = \"AGEP\", charvars = \"SEX\"){\n    #check one variable listed in numvars and charvars\n  if(length(numvars) &gt; 1 | length(charvars) &gt;1){\n    stop(\"Only one variable allowed\")\n  }\n  \n  \n\nggplot(tib,\naes(x = get(charvars), y = get(numvars), weight = PWGTP)) +\ngeom_boxplot() +\n  #labs and coord_flip method from O'Reilly R for Data Science\n  #wider plots easier for longer factor level values\n  labs(\n    title = paste0(numvars,\" Value Distribution by \",charvars),\n    x=charvars, y = numvars) +\n  coord_flip()\n}"
  },
  {
    "objectID": "Group10_Project01_ST558_Site.html#test-plot-function",
    "href": "Group10_Project01_ST558_Site.html#test-plot-function",
    "title": "API",
    "section": "Test Plot Function",
    "text": "Test Plot Function\n\n#test plot function\n#Enter single numeric variable and character \"_fac\" variable\nplotfx(tib,numvars = c(\"AGEP\"),charvars = \"SCH\")"
  }
]